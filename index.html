<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>心之楼 | Tower of Mind</title>
  <style>
    /* 基础样式 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #87CEEB;
      color: #f1f1f1;
      min-height: 100vh;
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 2rem 1rem 0 1rem;
      position: relative;
      z-index: 10; /* 提高z-index，确保在背景装饰元素前面 */
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100%;
    }
    
    /* 像素风格 */
    .pixel-text {
      font-family: monospace;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    /* 城市背景 */
    .city-bg {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 100vh;
      z-index: 0; /* 保持为0，作为最底层背景 */
      overflow: hidden;
      pointer-events: none;
    }
    
    .sky {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 75%;
      background: linear-gradient(to bottom, #87CEEB, #B0E0E6, #ADD8E6);
    }
    
    /* 远山 */
    .mountains {
      position: absolute;
      bottom: 10%; /* 稍微抬高山脉的基线 */
      left: 0;
      width: 100%;
      height: 35%; /* 增加山脉的高度范围 */
      z-index: 1;
    }
    
    .mountain {
      position: absolute;
      bottom: 0;
      background: linear-gradient(to bottom, #455A64, #263238);
      width: 100%;
      height: 100%;
    }
    
    .mountain-1 {
      clip-path: polygon(0 100%, 0 60%, 10% 40%, 25% 65%, 40% 50%, 55% 70%, 70% 45%, 85% 60%, 100% 35%, 100% 100%);
      opacity: 0.4;
      z-index: 1;
    }
    
    .mountain-2 {
      clip-path: polygon(0 100%, 0 70%, 5% 60%, 20% 80%, 35% 55%, 50% 75%, 65% 60%, 80% 85%, 95% 50%, 100% 70%, 100% 100%);
      background: linear-gradient(to bottom, #546E7A, #37474F);
      opacity: 0.6;
      z-index: 2;
    }
    
    .mountain-3 {
      clip-path: polygon(0 100%, 0 85%, 15% 65%, 30% 80%, 45% 60%, 60% 85%, 75% 70%, 90% 90%, 100% 80%, 100% 100%);
      background: linear-gradient(to bottom, #78909C, #546E7A);
      opacity: 0.8;
      z-index: 3;
    }

    /* 动态元素容器 */
    .dynamic-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1; /* 修改为较低的正值，确保在楼宇后面但仍然可见 */
    }

    /* 鸟 */
    .bird {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #333;
      clip-path: polygon(50% 0%, 60% 50%, 100% 50%, 60% 60%, 50% 100%, 40% 60%, 0% 50%, 40% 50%);
      animation: fly linear infinite;
    }

    @keyframes fly {
      0% {
        transform: translateX(-100px) translateY(0px) rotate(0deg);
      }
      25% {
        transform: translateX(calc(25vw)) translateY(-20px) rotate(5deg);
      }
      50% {
        transform: translateX(calc(50vw)) translateY(10px) rotate(0deg);
      }
      75% {
        transform: translateX(calc(75vw)) translateY(-15px) rotate(-5deg);
      }
      100% {
        transform: translateX(calc(100vw + 100px)) translateY(0px) rotate(0deg);
      }
    }

    /* 飞碟 */
    .ufo {
      position: absolute;
      width: 40px;
      height: 16px;
      background-color: #7f8c8d;
      border-radius: 50%;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.8);
      animation: ufo-move linear infinite;
    }

    .ufo::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 8px;
      background-color: #bdc3c7;
      border-radius: 50%;
      top: -4px;
      left: 10px;
    }

    .ufo::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, 
        rgba(52, 152, 219, 0) 0%, 
        rgba(52, 152, 219, 0.8) 20%, 
        rgba(52, 152, 219, 0.8) 80%, 
        rgba(52, 152, 219, 0) 100%);
      bottom: -4px;
      left: 0;
      filter: blur(2px);
      animation: ufo-glow 2s infinite alternate;
    }

    @keyframes ufo-move {
      0% {
        transform: translateX(-100px) translateY(0px) rotate(0deg);
      }
      33% {
        transform: translateX(calc(33vw)) translateY(30px) rotate(0deg);
      }
      66% {
        transform: translateX(calc(66vw)) translateY(-20px) rotate(0deg);
      }
      100% {
        transform: translateX(calc(100vw + 100px)) translateY(10px) rotate(0deg);
      }
    }

    @keyframes ufo-glow {
      0% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    /* 悬浮车 */
    .hover-car {
      position: absolute;
      width: 50px;
      height: 15px;
      background-color: #e74c3c;
      border-radius: 5px;
      animation: hover-car-move linear infinite;
    }

    .hover-car::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 8px;
      background-color: #ecf0f1;
      border-radius: 4px;
      top: -5px;
      left: 10px;
    }

    .hover-car::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, 
        rgba(231, 76, 60, 0) 0%, 
        rgba(231, 76, 60, 0.8) 20%, 
        rgba(231, 76, 60, 0.8) 80%, 
        rgba(231, 76, 60, 0) 100%);
      bottom: -3px;
      filter: blur(2px);
    }

    @keyframes hover-car-move {
      0% {
        transform: translateX(calc(100vw + 100px)) translateY(0);
      }
      100% {
        transform: translateX(-100px) translateY(15px);
      }
    }

    /* 热气球 */
    .balloon {
      position: absolute;
      animation: balloon-float linear infinite;
    }

    .balloon-body {
      width: 30px;
      height: 40px;
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    }

    .balloon-basket {
      width: 15px;
      height: 8px;
      background-color: #8b4513;
      position: absolute;
      bottom: -15px;
      left: 7.5px;
      border-radius: 2px;
    }

    .balloon-string {
      width: 1px;
      height: 15px;
      background-color: #7f8c8d;
      position: absolute;
      bottom: -7px;
      left: 15px;
    }

    @keyframes balloon-float {
      0% {
        transform: translateY(0) translateX(0);
      }
      25% {
        transform: translateY(-15px) translateX(10px);
      }
      50% {
        transform: translateY(0) translateX(20px);
      }
      75% {
        transform: translateY(15px) translateX(10px);
      }
      100% {
        transform: translateY(0) translateX(0);
      }
    }

    /* 未来飞行器 */
    .future-craft {
      position: absolute;
      width: 35px;
      height: 12px;
      background-color: #9b59b6;
      clip-path: polygon(0 50%, 20% 0, 80% 0, 100% 50%, 80% 100%, 20% 100%);
      animation: future-craft-move linear infinite;
      box-shadow: 0 0 15px rgba(155, 89, 182, 0.6);
    }

    .future-craft::before {
      content: '';
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background-color: #ecf0f1;
      top: 3.5px;
      left: 15px;
    }

    @keyframes future-craft-move {
      0% {
        transform: translateX(-100px) translateY(0) rotate(0deg);
      }
      33% {
        transform: translateX(calc(33vw)) translateY(-20px) rotate(10deg);
      }
      66% {
        transform: translateX(calc(66vw)) translateY(30px) rotate(-10deg);
      }
      100% {
        transform: translateX(calc(100vw + 100px)) translateY(0) rotate(0deg);
      }
    }

    /* 无人机 */
    .drone {
      position: absolute;
      width: 25px;
      height: 8px;
      background-color: #555;
      border-radius: 2px;
      animation: drone-move linear infinite;
    }

    .drone::before, .drone::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 12px;
      background-color: #444;
      top: 50%;
      transform: translateY(-50%);
    }

    .drone::before { left: 5px; }
    .drone::after { right: 5px; }

    .drone-light {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background-color: #ff4141;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      animation: blink 1s infinite;
    }
    
    @keyframes drone-move {
      0% {
        transform: translateX(calc(100vw + 100px)) translateY(0) rotate(2deg);
      }
      100% {
        transform: translateX(-100px) translateY(20px) rotate(-2deg);
      }
    }
    
    /* 云层 */
    .clouds {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2; /* 修改为较低的正值，确保在楼宇后面但仍然可见 */
    }
    
    .cloud {
      position: absolute;
      background: #fff;
      border-radius: 100px;
      filter: blur(1px);
    }
    
    .cloud-layer-1 { z-index: 2; opacity: 0.9; }
    .cloud-layer-2 { z-index: 3; opacity: 0.7; }
    .cloud-layer-3 { z-index: 4; opacity: 0.5; }

    .cloud span {
      position: absolute;
      background: #fff;
      border-radius: 100px;
    }

    .cloud-small { width: 100px; height: 30px; }
    .cloud-small span:nth-child(1) { width: 40px; height: 40px; top: -15px; left: 10px; }
    .cloud-small span:nth-child(2) { width: 50px; height: 50px; top: -25px; left: 30px; }
    .cloud-small span:nth-child(3) { width: 30px; height: 30px; top: -10px; left: 60px; }

    .cloud-medium { width: 150px; height: 45px; }
    .cloud-medium span:nth-child(1) { width: 60px; height: 60px; top: -25px; left: 15px; }
    .cloud-medium span:nth-child(2) { width: 80px; height: 80px; top: -40px; left: 40px; }
    .cloud-medium span:nth-child(3) { width: 50px; height: 50px; top: -20px; left: 90px; }

    .cloud-large { width: 220px; height: 60px; }
    .cloud-large span:nth-child(1) { width: 80px; height: 80px; top: -35px; left: 20px; }
    .cloud-large span:nth-child(2) { width: 110px; height: 110px; top: -60px; left: 50px; }
    .cloud-large span:nth-child(3) { width: 70px; height: 70px; top: -30px; left: 130px; }
    .cloud-large span:nth-child(4) { width: 50px; height: 50px; top: -20px; left: 180px; }
    
    @keyframes float-right {
      0% { transform: translateX(-200px); }
      100% { transform: translateX(calc(100vw + 200px)); }
    }
    
    @keyframes float-left {
      0% { transform: translateX(calc(100vw + 200px)); }
      100% { transform: translateX(-200px); }
    }
    

    
    .buildings {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40%; /* 降低建筑群的整体高度，为山脉留出空间 */
      display: flex;
      align-items: flex-end;
      z-index: 5; /* 提高z-index，确保在动态元素和云层的前面 */
    }
    
    /* 添加多层建筑群 */
    .buildings-back {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 35%;
      display: flex;
      align-items: flex-end;
      z-index: 5; /* 提高z-index */
      opacity: 0.7;
    }
    
    .buildings-front {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 45%;
      display: flex;
      align-items: flex-end;
      z-index: 6; /* 提高z-index */
    }
    
    .building {
      background-color: #2c3e50;
      position: relative;
      margin: 0 2px;
      flex-grow: 1;
      flex-basis: 0;
      min-width: 15px; /* 增加最小宽度 */
      box-shadow: 
        inset 2px 2px 0 rgba(255,255,255,0.05), 
        inset -2px 0 0 rgba(0,0,0,0.2),
        5px 0 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    .building:hover {
      transform: translateY(-10px);
    }
    
    .building-dark {
      background-color: #233140;
    }
    
    .building-light {
      background-color: #34495e;
    }

    .building-accent {
      background: linear-gradient(to top, #e74c3c, #c0392b);
    }
    
    .building-gradient {
      background: linear-gradient(to top, #34495e, #56708b);
    }
    
    /* 添加更多丰富的颜色 */
    .building-purple {
      background: linear-gradient(to top, #8e44ad, #9b59b6);
    }
    
    .building-blue {
      background: linear-gradient(to top, #2980b9, #3498db);
    }
    
    .building-green {
      background: linear-gradient(to top, #27ae60, #2ecc71);
    }
    
    .building-yellow {
      background: linear-gradient(to top, #f39c12, #f1c40f);
    }
    
    .building-orange {
      background: linear-gradient(to top, #d35400, #e67e22);
    }
    
    .building-teal {
      background: linear-gradient(to top, #16a085, #1abc9c);
    }
    
    .building-pink {
      background: linear-gradient(to top, #c2185b, #e91e63);
    }
    
    .building-cyan {
      background: linear-gradient(to top, #00acc1, #00bcd4);
    }

    /* 建筑形状变化 */
    .building-tapered {
      clip-path: polygon(20% 0, 80% 0, 100% 100%, 0% 100%);
    }
    
    .building-spire {
      clip-path: polygon(40% 0, 60% 0, 60% 30%, 50% 0, 40% 30%, 40% 0, 100% 100%, 0% 100%);
    }
    
    .building-stepped {
      clip-path: polygon(0 100%, 0 60%, 30% 60%, 30% 40%, 70% 40%, 70% 20%, 100% 20%, 100% 100%);
    }
    
    .building-cutout {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 70%, 30% 70%, 30% 40%, 0 40%);
    }
    
    /* 更复杂的组合形状 */
    .building-complex-1 {
      clip-path: polygon(
        0 100%, 0 50%, 
        20% 50%, 20% 30%, 
        40% 30%, 40% 10%, 
        60% 10%, 60% 30%, 
        80% 30%, 80% 50%, 
        100% 50%, 100% 100%
      );
    }
    
    .building-complex-2 {
      clip-path: polygon(
        0 100%, 0 40%,
        20% 40%, 20% 20%,
        30% 20%, 30% 0,
        70% 0, 70% 20%,
        80% 20%, 80% 40%,
        100% 40%, 100% 100%
      );
    }
    
    .building-complex-3 {
      clip-path: polygon(
        0 100%, 0 60%,
        20% 60%, 20% 40%,
        50% 0, 80% 40%,
        80% 60%, 100% 60%,
        100% 100%
      );
    }
    
    .building-complex-4 {
      clip-path: polygon(
        0 100%, 0 30%,
        30% 30%, 50% 0,
        70% 30%, 100% 30%,
        100% 100%
      );
    }

    .window {
      position: absolute;
      background-color: #f1c40f;
      width: 3px;
      height: 6px;
      opacity: 0.8;
      border-radius: 1px;
      box-shadow: 0 0 5px #f1c40f;
    }
    
    .window-dark {
      background-color: #e67e22;
      box-shadow: 0 0 5px #e67e22;
    }
    
    .window-blue {
      background-color: #3498db;
      box-shadow: 0 0 5px #3498db;
    }

    .building-antenna::after {
      content: '';
      position: absolute;
      top: -2px;
      left: -4px;
      width: 10px;
      height: 4px;
      background-color: #e74c3c;
      border-radius: 50%;
      animation: blink 1s infinite;
    }

    .neon-sign {
      position: absolute;
      top: 20%;
      left: 10%;
      right: 10%;
      padding: 2px 5px;
      font-size: 8px;
      font-family: 'Courier New', Courier, monospace;
      color: #fff;
      text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #f09, 0 0 20px #f09, 0 0 25px #f09, 0 0 30px #f09, 0 0 35px #f09;
      animation: neon-flicker 2s infinite alternate;
    }

    @keyframes neon-flicker {
      0%, 18%, 22%, 25%, 53%, 57%, 100% {
        opacity: 1;
      }
      20%, 24%, 55% {
        opacity: 0.8;
      }
    }
    
    /* 心之楼主体 */
    .tower-container {
      position: relative;
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
      padding-bottom: 0;
      margin-top: auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      perspective: 1500px;
      z-index: 10; /* 添加较高的z-index，确保在背景装饰元素前面 */
    }
    
    .tower {
      position: relative;
      margin: 0 auto;
      width: 600px; /* 增加宽度以容纳阳台 */
      margin-top: auto;
      transform: rotateX(9deg);/*倾斜角度以体现3d效果、底层的重要性*/
      transform-style: preserve-3d;
      display: flex;
      flex-direction: column-reverse;
      isolation: isolate; /* 创建新的层叠上下文，解决z-index问题 */
    }
    
    .construction-site {
      position: relative;
      width: 100%;
      height: 200px;
      background-color: transparent;
      border: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      color: #aaa;
      text-align: center;
      margin-bottom: 0;
    }
    
    .construction-ground {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 30px;
      background-color: #3e2723;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .construction-ground::before {
      content: '';
      position: absolute;
      top: -5px;
      left: 0;
      width: 100%;
      height: 5px;
      background-color: #5d4037;
    }
    
    .construction-message {
      margin-bottom: 40px;
    }
    
    .crane {
      position: absolute;
      bottom: 30px;
      right: 20px;
      width: 60px;
      height: 120px;
    }
    
    .crane-base {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 100px;
      background-color: #f57c00;
    }
    
    .crane-arm {
      position: absolute;
      top: 10px;
      left: 0;
      width: 60px;
      height: 10px;
      background-color: #f57c00;
    }
    
    .crane-cable {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 2px;
      height: 30px;
      background-color: #9e9e9e;
    }
    
    /* 楼层样式 */
    .floor {
      width: 100%;
      height: 150px; /* 标准楼层高度 */
      position: relative;
      margin-bottom: 30px; /* 增加楼层间距 */
      cursor: pointer;
      transform-style: preserve-3d;
      perspective: 800px;
    }
    
    /* 双层楼层样式 */
    .floor-double {
      height: 300px; /* 双层楼层高度 */
    }
    
    /* 修改为正面视角的悬停效果 */
    .floor:hover {
      transform: translateZ(15px);
      z-index: 10;
    }
    
    .floor-content {
      width: 100%;
      height: 100%;
      background-color: #f5f5f5;
      border: 1px solid #bbb;
      border-radius: 4px;
      box-shadow: 
        0 5px 15px rgba(0,0,0,0.1),
        inset 0 0 30px rgba(0,0,0,0.05);
      position: relative;
      transform-style: preserve-3d;
      /* 移除overflow: hidden属性，以允许阳台显示在楼层外部 */
    }

    /* 楼层墙面像素风格 */
    .floor-wall-pattern-1 { /* 网格 */
        background-color: #f5f5f5;
        background-image: 
            linear-gradient(#e0e0e0 1px, transparent 1px),
            linear-gradient(90deg, #e0e0e0 1px, transparent 1px);
        background-size: 20px 20px;
    }

    .floor-wall-pattern-2 { /* 点阵 */
        background-color: #f5f5f5;
        background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
        background-size: 8px 8px;
    }

    .floor-wall-pattern-3 { /* 竖条纹 */
        background-color: #f5f5f5;
        background-image: repeating-linear-gradient(90deg, #e0e0e0, #e0e0e0 2px, transparent 2px, transparent 10px);
    }

    .floor-wall-pattern-4 { /* 方格棋盘 */
        background-image:
          linear-gradient(45deg, #d1d1d1 25%, transparent 25%), 
          linear-gradient(-45deg, #d1d1d1 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #d1d1d1 75%),
          linear-gradient(-45deg, transparent 75%, #d1d1d1 75%);
        background-size: 20px 20px;
        background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        background-color: #f5f5f5;
    }

    /* 楼层内部容器 */
    .floor-interior {
      display: flex;
      height: 100%;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      padding: 10px;
      gap: 5px;
      box-sizing: border-box;
      z-index: 5;
    }
    
    /* 双层布局 */
    .floor-interior-double {
      flex-direction: column;
    }
    
    .floor-interior-row {
      display: flex;
      flex: 1;
      width: 100%;
      gap: 5px;
    }
    
    /* 楼层分隔线 */
    .floor-divider {
      width: 100%;
      height: 2px;
      background-color: rgba(0,0,0,0.1);
      margin: 3px 0;
      box-shadow: 0 1px 0 rgba(255,255,255,0.3);
    }

    /* 房间空间样式 */
    .room {
      flex: 1;
      min-width: 40px;
      height: 100%;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      border-left: 1px solid rgba(0,0,0,0.4);
      border-right: 1px solid rgba(255,255,255,0.1);
      box-shadow: inset 0 0 25px rgba(0,0,0,0.5);
      overflow: hidden; /* 这里保留overflow: hidden，因为房间内部元素应该被限制在房间内 */
      transition: all 0.3s ease;
      cursor: help;
      transform-style: preserve-3d;
    }

    .room:first-child {
      border-left: none;
    }
    .room:last-child {
      border-right: none;
    }

    .room:hover {
      flex-grow: 2;
      z-index: 10;
    }

    /* 健身房悬停效果 */
    .room-gym:hover {
      box-shadow: inset 0 0 30px rgba(255, 120, 50, 0.6);
    }
    
    .room-gym:hover .gym-mirror {
      background-color: rgba(255,255,255,0.3);
      box-shadow: 0 0 10px rgba(255,255,255,0.5);
    }
    
    .room-gym:hover .gym-dumbbell,
    .room-gym:hover .gym-barbell {
      transform: translateY(-2px);
      transition: transform 0.3s ease;
    }
    
    .room-gym:hover .gym-person {
      animation-duration: 1.5s;
    }
    
    .room-gym:hover .treadmill-belt {
      animation-duration: 0.5s;
    }
    
    /* 3D墙壁悬停效果 */
    .room-gym:hover .gym-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }
    
    .room-gym:hover .gym-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }
    
    .room-gym:hover .gym-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }
    
    .room-gym:hover .gym-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }
    
    .room-gym:hover .gym-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-title-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Courier New', Courier, monospace;
      font-size: 16px;
      color: #fff;
      text-align: center;
      padding: 5px;
      text-shadow: 0 0 4px #fff, 0 0 10px #29b6f6, 0 0 18px #29b6f6, 0 0 25px #29b6f6;
      animation: neon-flicker 2s infinite alternate;
      z-index: 100;
      word-break: break-word;
      pointer-events: none;
      background-color: rgba(0, 0, 0, 0.4);
      border-radius: 4px;
      width: 80%;
      max-width: 100px;
      box-shadow: 0 0 15px rgba(0, 150, 255, 0.5);
      transform-style: preserve-3d;
      transform: translate(-50%, -50%) translateZ(5px);
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes float-right {
      0% { transform: translateX(-200px); }
      100% { transform: translateX(calc(100vw + 200px)); }
    }
    
    @keyframes float-left {
      0% { transform: translateX(calc(100vw + 200px)); }
      100% { transform: translateX(-200px); }
    }
    
    .floor-empty {
      position: relative;
      height: 100%;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-around;
    }
    
    .construction-tool {
      width: 15px;
      height: 15px;
      background-color: #757575;
      position: absolute;
      transform: rotate(45deg);
    }
    
    .construction-tool.paint {
      width: 20px;
      height: 30px;
      background-color: #f57c00;
      transform: rotate(15deg);
    }
    
    .construction-tool.paint::before {
      content: '';
      position: absolute;
      top: -5px;
      left: 5px;
      width: 10px;
      height: 5px;
      background-color: #e65100;
    }
    
    .construction-tool.ladder {
      width: 30px;
      height: 60px;
      background-color: transparent;
      border-left: 4px solid #8d6e63;
      border-right: 4px solid #8d6e63;
      transform: rotate(5deg);
    }
    
    .construction-tool.ladder::before,
    .construction-tool.ladder::after {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 4px;
      background-color: #8d6e63;
    }
    
    .construction-tool.ladder::before {
      top: 15px;
    }
    
    .construction-tool.ladder::after {
      bottom: 15px;
    }
    
    .construction-tool.cement {
      width: 25px;
      height: 20px;
      background-color: #9e9e9e;
      border-radius: 3px;
      transform: rotate(0);
    }
    
    .construction-tool.plank {
      width: 50px;
      height: 10px;
      background-color: #8d6e63;
      transform: rotate(5deg);
    }
    
    .construction-tool.toolbox {
      width: 30px;
      height: 20px;
      background-color: #d32f2f;
      transform: rotate(0);
      border-radius: 3px 3px 0 0;
    }
    
    .construction-tool.toolbox::after {
      content: '';
      position: absolute;
      top: -5px;
      left: 10px;
      right: 10px;
      height: 8px;
      background-color: #b71c1c;
      border-radius: 4px 4px 0 0;
    }
    
    /* 楼层标签样式 */
    .floor-label {
      position: absolute;
      left: -150px; /* 定位到楼层左侧 */
      transform: translateY(-50%);
      width: 140px;
      text-align: right;
      font-size: 20px; /* 放大字体 */
      font-weight: bold; /* 加粗字体 */
      color: #fff;
      text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #00aaff, 0 0 20px #00aaff; /* 发光效果 */
      z-index: 999; /* 使用极高的z-index确保在最上层 */
      pointer-events: auto; /* 允许点击 */
      background-color: rgba(0,0,0,0.5); /* 加深背景色 */
      padding: 5px 10px; /* 添加内边距 */
      border-radius: 5px; /* 圆角 */
      backdrop-filter: blur(3px); /* 增强背景模糊效果 */
      -webkit-backdrop-filter: blur(3px); /* Safari支持 */
      box-shadow: 0 0 15px rgba(0,0,0,0.5); /* 添加阴影 */
      border: 1px solid rgba(255,255,255,0.2); /* 添加边框 */
      transition: all 0.3s ease; /* 添加过渡效果 */
    }
    
    .floor-label:hover {
      background-color: rgba(0,0,0,0.7); /* 悬停时加深背景 */
      box-shadow: 0 0 20px rgba(0,0,0,0.7); /* 增强阴影 */
      transform: translateY(-50%) scale(1.05); /* 轻微放大 */
      text-shadow: 0 0 8px #fff, 0 0 15px #fff, 0 0 20px #00aaff, 0 0 30px #00aaff; /* 增强发光效果 */
    }

    /* 房间样式 - 增加3D效果 */
    .floor-3d-effect {
      position: absolute;
      bottom: -30px; /* 更新，与楼层间距匹配 */
      left: 0;
      right: 0;
      height: 30px; /* 更新，与楼层间距匹配 */
      background-color: #aeaeae; /* 结构板的颜色 */
      transform: rotateX(-70deg);
      transform-origin: top;
      box-shadow: inset 0 3px 10px rgba(0,0,0,0.2); /* 增加深度感 */
    }

    /* 楼层内部的顶板效果 */
    .floor-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 8px; /* 顶板的厚度 */
      background-color: #e9e9e9;
      transform: rotateX(60deg);
      transform-origin: bottom;
    }

    /* 添加阳台样式 */
    .floor-balcony-left,
    .floor-balcony-right {
      position: absolute;
      width: 40px; /* 增加宽度从25px到40px */
      height: 70%; /* 增加高度从60%到70% */
      top: 15%;
      background-color: rgba(224, 224, 224, 0.9); /* 增加不透明度 */
      border: 2px solid #aaa; /* 加粗边框 */
      box-shadow: 0 3px 10px rgba(0,0,0,0.3); /* 增强阴影 */
      z-index: 2; /* 确保在楼层元素之上但在标签之下 */
    }

    .floor-balcony-left {
      left: -40px; /* 调整位置与新宽度匹配 */
      border-radius: 8px 0 0 8px; /* 增加圆角 */
      transform: perspective(300px) rotateY(15deg);
      box-shadow: -5px 5px 15px rgba(0,0,0,0.3);
      border-right: none; /* 去掉右边框 */
    }

    .floor-balcony-right {
      right: -40px; /* 调整位置与新宽度匹配 */
      border-radius: 0 8px 8px 0; /* 增加圆角 */
      transform: perspective(300px) rotateY(-15deg);
      box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
      border-left: none; /* 去掉左边框 */
    }

    /* 阳台栏杆 */
    .floor-balcony-railing {
      position: absolute;
      height: 40%;
      width: 100%;
      top: 0;
      left: 0;
      border-top: 3px solid #9e9e9e; /* 加粗栏杆 */
      border-bottom: 3px solid #9e9e9e; /* 加粗栏杆 */
    }

    .floor-balcony-railing::before {
      content: '';
      position: absolute;
      height: 100%;
      width: 100%;
      background: repeating-linear-gradient(
        90deg,
        #9e9e9e,
        #9e9e9e 2px, /* 加粗栏杆柱 */
        transparent 2px,
        transparent 8px
      );
    }

    /* 阳台地板纹理 */
    .floor-balcony-floor {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60%;
      background: repeating-linear-gradient(
        90deg,
        #bdbdbd,
        #bdbdbd 6px, /* 加宽地板条纹 */
        #e0e0e0 6px,
        #e0e0e0 12px
      );
      border-top: 2px solid #9e9e9e; /* 添加顶部边框 */
    }

    /* 阳台悬停效果 */
    .floor:hover .floor-balcony-left {
      transform: perspective(300px) rotateY(8deg);
      box-shadow: -5px 5px 20px rgba(0,0,0,0.5); /* 增强悬停阴影 */
      transition: all 0.3s ease;
    }

    .floor:hover .floor-balcony-right {
      transform: perspective(300px) rotateY(-8deg);
      box-shadow: 5px 5px 20px rgba(0,0,0,0.5); /* 增强悬停阴影 */
      transition: all 0.3s ease;
    }
    
    /* 房间类型样式 */
    .room-cafe { background: linear-gradient(160deg, #795548, #5d4037); }
    .room-livingroom { background: linear-gradient(160deg, #ff8a65, #ff5722); }
    .room-gym { 
      background: linear-gradient(160deg, #ff7043, #f4511e);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }
    /* 健身房特有元素 */
    .room-gym::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      background: repeating-linear-gradient(90deg, 
        rgba(255,255,255,0.1) 0px, 
        rgba(255,255,255,0.1) 20px, 
        transparent 20px, 
        transparent 40px);
    }
    .room-gym::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background-color: rgba(255,255,255,0.3);
    }
    
    /* 健身房墙壁 - 创建3D空间感 */
    .room-gym .gym-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }
    
    /* 左墙 */
    .room-gym .gym-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
    }
    
    /* 右墙 */
    .room-gym .gym-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
    }
    
    /* 后墙 */
    .room-gym .gym-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
    }
    
    /* 地板 */
    .room-gym .gym-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: repeating-linear-gradient(
        45deg,
        rgba(0,0,0,0.05) 0px,
        rgba(0,0,0,0.05) 10px,
        rgba(255,255,255,0.05) 10px,
        rgba(255,255,255,0.05) 20px
      );
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }
    
    /* 天花板 */
    .room-gym .gym-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background-color: rgba(0,0,0,0.1);
      background: linear-gradient(
        to top,
        rgba(255,100,50,0.1),
        rgba(0,0,0,0.2)
      );
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }
    
    /* 墙角连接 */
    .room-gym .gym-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }
    
    /* 左上角 */
    .room-gym .gym-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
      border-radius: 0 0 50% 0;
    }
    
    /* 右上角 */
    .room-gym .gym-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
      border-radius: 0 0 0 50%;
    }
    
    /* 左下角 */
    .room-gym .gym-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
      border-radius: 0 50% 0 0;
    }
    
    /* 右下角 */
    .room-gym .gym-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(255,100,50,0.1));
      border-radius: 50% 0 0 0;
    }
    
    /* 添加边缘线条增强连接感 */
    .room-gym .gym-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }
    
    /* 左侧边缘 */
    .room-gym .gym-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }
    
    /* 右侧边缘 */
    .room-gym .gym-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }
    
    /* 顶部边缘 */
    .room-gym .gym-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }
    
    /* 底部边缘 */
    .room-gym .gym-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }
    .room-gym .gym-equipment {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      border-radius: 3px;
    }
    .room-gym .gym-dumbbell {
      width: 15px;
      height: 5px;
      bottom: 25%;
      left: 20%;
      box-shadow: 0 0 0 2px rgba(255,255,255,0.2);
      z-index: 5;
    }
    .room-gym .gym-dumbbell::before,
    .room-gym .gym-dumbbell::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 5px;
      background-color: rgba(0,0,0,0.3);
      border-radius: 50%;
    }
    .room-gym .gym-dumbbell::before {
      left: -3px;
    }
    .room-gym .gym-dumbbell::after {
      right: -3px;
    }
    .room-gym .gym-treadmill {
      width: 20px;
      height: 15px;
      bottom: 20%;
      right: 20%;
      transform: perspective(20px) rotateX(30deg);
      border: 1px solid rgba(255,255,255,0.2);
      z-index: 5;
    }
    .room-gym .gym-treadmill::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 8px;
      top: -8px;
      right: 2px;
      background-color: rgba(0,0,0,0.3);
    }
    .room-gym .gym-bench {
      width: 18px;
      height: 8px;
      bottom: 30%;
      left: 40%;
      background-color: rgba(0,0,0,0.25);
      border-radius: 1px;
      z-index: 5;
    }
    .room-gym .gym-bench::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 6px;
      background-color: rgba(0,0,0,0.3);
      bottom: -6px;
      left: 3px;
    }
    .room-gym .gym-bench::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 6px;
      background-color: rgba(0,0,0,0.3);
      bottom: -6px;
      right: 3px;
    }
    .room-gym .gym-mirror {
      position: absolute;
      top: 15%;
      left: 15%;
      right: 15%;
      height: 30px;
      background-color: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
      transform: rotateX(10deg);
      z-index: 4;
    }
    .room-gym .gym-barbell {
      position: absolute;
      width: 25px;
      height: 2px;
      background-color: rgba(0,0,0,0.3);
      bottom: 35%;
      right: 25%;
      z-index: 5;
    }
    .room-gym .gym-barbell::before,
    .room-gym .gym-barbell::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 6px;
      background-color: rgba(0,0,0,0.4);
      border-radius: 50%;
      top: -2px;
    }
    .room-gym .gym-barbell::before {
      left: -3px;
    }
    .room-gym .gym-barbell::after {
      right: -3px;
    }
    .room-gym .gym-mirror {
      position: absolute;
      top: 20px;
      left: 10%;
      right: 10%;
      height: 30px;
      background-color: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
    }
    .room-gym .gym-barbell {
      position: absolute;
      width: 25px;
      height: 2px;
      background-color: rgba(0,0,0,0.3);
      bottom: 30px;
      right: 20%;
    }
    .room-gym .gym-barbell::before,
    .room-gym .gym-barbell::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 6px;
      background-color: rgba(0,0,0,0.4);
      border-radius: 50%;
      top: -2px;
    }
    .room-gym .gym-barbell::before {
      left: -3px;
    }
    .room-gym .gym-barbell::after {
      right: -3px;
    }
    
    /* 健身房动画效果 */
    .room-gym .gym-person {
      position: absolute;
      width: 5px;
      height: 10px;
      background-color: rgba(0,0,0,0.5);
      bottom: 15%;
      left: 30%;
      animation: gym-exercise 3s infinite alternate;
      z-index: 6;
      transition: all 0.3s ease;
    }
    .room-gym .gym-person::before {
      content: '';
      position: absolute;
      width: 3px;
      height: 3px;
      background-color: rgba(0,0,0,0.5);
      border-radius: 50%;
      top: -3px;
      left: 1px;
      transition: all 0.3s ease;
    }
    .room-gym .gym-person::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 1px;
      background-color: rgba(0,0,0,0.5);
      top: 3px;
      left: -2.5px;
      animation: gym-lift 3s infinite alternate;
      transform-origin: center;
      transition: all 0.3s ease;
    }
    
    .room-gym:hover .gym-person {
      background-color: rgba(0,0,0,0.7);
    }
    
    @keyframes gym-exercise {
      0% { transform: translateY(0); }
      100% { transform: translateY(-2px); }
    }
    
    @keyframes gym-lift {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(30deg); }
    }
    
    .room-gym .treadmill-belt {
      position: absolute;
      width: 16px;
      height: 4px;
      bottom: 10%;
      right: 25%;
      background: repeating-linear-gradient(90deg,
        rgba(0,0,0,0.3) 0px,
        rgba(0,0,0,0.3) 2px,
        rgba(255,255,255,0.1) 2px,
        rgba(255,255,255,0.1) 4px
      );
      animation: treadmill-run 1s infinite linear;
      z-index: 6;
      transition: all 0.3s ease;
    }
    
    @keyframes treadmill-run {
      0% { background-position: 0 0; }
      100% { background-position: 8px 0; }
    }
    
    .room-gym:hover .treadmill-belt {
      animation-duration: 0.5s;
      height: 5px;
    }
    
    .room-gym .gym-mirror-reflection {
      position: absolute;
      width: 3px;
      height: 6px;
      background-color: rgba(255,255,255,0.2);
      top: 25%;
      left: 35%;
      animation: mirror-flash 5s infinite alternate;
      z-index: 5;
      transition: all 0.3s ease;
    }
    
    @keyframes mirror-flash {
      0%, 20%, 40%, 60%, 80% { opacity: 0.2; transform: translateX(-1px); }
      10%, 30%, 50%, 70%, 90% { opacity: 0.8; transform: translateX(1px); }
    }
    
    .room-gym:hover .gym-mirror-reflection {
      background-color: rgba(255,255,255,0.4);
      animation-duration: 3s;
    }
    
    .room-pool { background: linear-gradient(160deg, #29b6f6, #039be5); }
    .room-meeting { background: linear-gradient(160deg, #7e57c2, #5e35b1); }
    .room-computer { background: linear-gradient(160deg, #26a69a, #00897b); }
    .room-library { background: linear-gradient(160deg, #9ccc65, #7cb342); }
    .room-garden { 
      background: linear-gradient(160deg, #66bb6a, #43a047);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 空中花园墙壁 - 创建3D空间感 */
    .room-garden .garden-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-garden .garden-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
    }

    /* 右墙 */
    .room-garden .garden-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
    }

    /* 后墙 */
    .room-garden .garden-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
    }

    /* 地板 - 草地 */
    .room-garden .garden-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #2e7d32, #43a047);
      background-image: 
        radial-gradient(circle, rgba(255,255,255,0.1) 2px, transparent 2px),
        radial-gradient(circle, rgba(255,255,255,0.15) 1px, transparent 1px);
      background-size: 20px 20px, 10px 10px;
      background-position: 0 0, 5px 5px;
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 - 天空 */
    .room-garden .garden-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #81c784, #4caf50);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-garden .garden-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-garden .garden-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-garden .garden-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-garden .garden-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-garden .garden-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(100,200,100,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-garden .garden-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-garden .garden-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-garden .garden-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-garden .garden-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-garden .garden-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 花园装饰元素 */
    .room-garden .garden-plant {
      position: absolute;
      width: 12px;
      height: 15px;
      bottom: 12%;
      left: 70%;
      z-index: 5;
    }

    /* 大型植物 */
    .room-garden .garden-tree {
      width: 15px;
      height: 30px;
      bottom: 20%;
      left: 20%;
      position: absolute;
      z-index: 5;
    }

    .room-garden .garden-tree::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 6px;
      width: 3px;
      height: 12px;
      background-color: #5d4037;
    }

    .room-garden .garden-tree::after {
      content: '';
      position: absolute;
      bottom: 8px;
      left: 0;
      width: 15px;
      height: 22px;
      background-color: #66bb6a;
      border-radius: 50% 50% 20% 20%;
      box-shadow: inset 0 -5px 10px rgba(0,0,0,0.2);
    }

    /* 花丛 */
    .room-garden .garden-flowers {
      width: 20px;
      height: 12px;
      bottom: 25%;
      right: 25%;
      position: absolute;
      z-index: 5;
    }

    .room-garden .garden-flowers::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 3px;
      right: 3px;
      height: 3px;
      background-color: #2e7d32;
    }

    .room-garden .garden-flowers::after {
      content: '';
      position: absolute;
      bottom: 3px;
      left: 0;
      width: 20px;
      height: 9px;
      background: radial-gradient(circle at 30% 70%, #f06292 2px, transparent 2px),
                radial-gradient(circle at 70% 30%, #ba68c8 3px, transparent 3px),
                radial-gradient(circle at 50% 50%, #ffeb3b 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ff5722 2px, transparent 2px),
                radial-gradient(circle at 80% 80%, #e91e63 2px, transparent 2px);
    }

    /* 花盆 */
    .room-garden .garden-pot {
      width: 10px;
      height: 12px;
      bottom: 30%;
      left: 60%;
      position: absolute;
      z-index: 5;
    }

    .room-garden .garden-pot::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 10px;
      height: 6px;
      background-color: #795548;
      border-radius: 1px 1px 2px 2px;
    }

    .room-garden .garden-pot::after {
      content: '';
      position: absolute;
      bottom: 6px;
      left: 1px;
      width: 8px;
      height: 6px;
      background-color: #4caf50;
      border-radius: 50% 50% 0 0;
    }

    /* 水池 */
    .room-garden .garden-pond {
      width: 25px;
      height: 15px;
      bottom: 15%;
      left: 35%;
      background: linear-gradient(to bottom, #29b6f6, #039be5);
      border-radius: 50%;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
      position: absolute;
      z-index: 4;
    }

    /* 蝴蝶 */
    .room-garden .garden-butterfly {
      width: 8px;
      height: 8px;
      top: 40%;
      right: 30%;
      position: absolute;
      z-index: 7;
      animation: butterfly-fly 10s infinite alternate ease-in-out;
    }

    .room-garden .garden-butterfly::before,
    .room-garden .garden-butterfly::after {
      content: '';
      position: absolute;
      width: 4px;
      height: 6px;
      background-color: #f48fb1;
      border-radius: 50% 50% 0 50%;
      animation: butterfly-wings 0.5s infinite alternate ease-in-out;
    }

    .room-garden .garden-butterfly::before {
      left: 0;
      transform-origin: right center;
    }

    .room-garden .garden-butterfly::after {
      right: 0;
      transform: scaleX(-1);
      transform-origin: left center;
    }

    @keyframes butterfly-fly {
      0% { transform: translate(0, 0) rotate(10deg); }
      25% { transform: translate(-10px, 5px) rotate(-5deg); }
      50% { transform: translate(-5px, -10px) rotate(5deg); }
      75% { transform: translate(10px, 0px) rotate(-10deg); }
      100% { transform: translate(5px, 10px) rotate(0deg); }
    }

    @keyframes butterfly-wings {
      0% { transform: rotate(50deg); }
      100% { transform: rotate(-50deg); }
    }

    /* 阳光效果 */
    .room-garden .garden-sunlight {
      width: 25px;
      height: 25px;
      top: 15%;
      right: 15%;
      background: radial-gradient(circle, rgba(255,255,255,0.7) 0%, rgba(255,236,179,0.5) 30%, transparent 70%);
      border-radius: 50%;
      animation: sunlight-flicker 3s infinite alternate ease-in-out;
      position: absolute;
      z-index: 3;
    }

    @keyframes sunlight-flicker {
      0%, 100% { opacity: 0.7; transform: scale(1); }
      50% { opacity: 0.9; transform: scale(1.2); }
    }

    /* 悬停效果 */
    .room-garden:hover .garden-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-garden:hover .garden-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-garden:hover .garden-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-garden:hover .garden-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-garden:hover .garden-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-garden:hover .garden-butterfly {
      animation-duration: 5s;
    }

    .room-garden:hover .garden-sunlight {
      animation-duration: 2s;
    }

    .room-studio { background: linear-gradient(160deg, #90a4ae, #607d8b); }
    
    /* 按钮样式 */
    .button {
      display: inline-block;
      padding: 8px 16px;
      background-color: #1976d2;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .button:hover {
      background-color: #1565c0;
    }
    
    .button:active {
      background-color: #0d47a1;
    }
    
    /* 模态框 */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0s 0.2s, opacity 0.2s;
    }
    
    .modal.show {
      visibility: visible;
      opacity: 1;
      transition: opacity 0.2s;
    }
    
    .modal-content {
      background-color: #2c2c2c;
      border-radius: 8px;
      padding: 20px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
    }
    
    .modal-header {
      margin-bottom: 16px;
    }
    
    .modal-title {
      font-size: 18px;
      color: #fff;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      color: #aaa;
    }
    
    .form-control {
      width: 100%;
      padding: 8px;
      background-color: #3d3d3d;
      border: 1px solid #505050;
      border-radius: 4px;
      color: #fff;
    }
    
    .form-control:focus {
      outline: none;
      border-color: #1976d2;
    }
    
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 20px;
    }
    
    .button-cancel {
      background-color: #424242;
      margin-right: 8px;
    }
    
    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }
    
    /* 标题和信息 */
    .title {
      text-align: center;
      margin-bottom: 24px;
      position: relative;
      z-index: 3;
    }
    
    .title h1 {
      font-size: 36px;
      color: #fff;
      letter-spacing: 2px;
      margin-bottom: 8px;
    }
    
    .title p {
      color: #aaa;
    }
    
    .action-bar {
      text-align: center;
      margin-bottom: 32px;
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
      .tower {
        width: 240px;
      }
      
      .floor-label {
        left: -110px; /* 调整移动端的位置 */
        width: 100px;
        font-size: 14px;
      }
    }

    .room-pool { 
      background: linear-gradient(160deg, #29b6f6, #039be5);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 游泳池墙壁 - 创建3D空间感 */
    .room-pool .pool-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-pool .pool-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
    }

    /* 右墙 */
    .room-pool .pool-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
    }

    /* 后墙 */
    .room-pool .pool-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
    }

    /* 地板 - 水面 */
    .room-pool .pool-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #0288d1, #03a9f4);
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      animation: water-shimmer 3s infinite alternate;
    }

    @keyframes water-shimmer {
      0% { background-position: 0% 0%; }
      100% { background-position: 10px 10px; }
    }

    /* 天花板 */
    .room-pool .pool-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #4fc3f7, #29b6f6);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-pool .pool-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-pool .pool-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-pool .pool-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-pool .pool-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-pool .pool-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(41,182,246,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-pool .pool-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-pool .pool-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-pool .pool-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-pool .pool-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-pool .pool-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 游泳池装饰元素 */
    /* 水波纹 */
    .room-pool .pool-water-ripple {
      position: absolute;
      width: 40px;
      height: 40px;
      bottom: 20%;
      left: 30%;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.3);
      opacity: 0;
      transform: scale(0);
      animation: ripple 4s infinite;
      z-index: 3;
    }

    .room-pool .pool-water-ripple:nth-child(2) {
      left: 60%;
      bottom: 25%;
      animation-delay: 1s;
    }

    .room-pool .pool-water-ripple:nth-child(3) {
      left: 40%;
      bottom: 15%;
      animation-delay: 2s;
    }

    @keyframes ripple {
      0% { transform: scale(0); opacity: 0.7; }
      100% { transform: scale(1); opacity: 0; }
    }

    /* 救生圈 */
    .room-pool .pool-lifesaver {
      position: absolute;
      width: 15px;
      height: 15px;
      bottom: 30%;
      right: 20%;
      background-color: #f44336;
      border-radius: 50%;
      z-index: 5;
    }

    .room-pool .pool-lifesaver::before {
      content: '';
      position: absolute;
      width: 7px;
      height: 7px;
      top: 4px;
      left: 4px;
      background-color: white;
      border-radius: 50%;
    }

    /* 泳池梯子 */
    .room-pool .pool-ladder {
      position: absolute;
      width: 10px;
      height: 25px;
      bottom: 15%;
      left: 15%;
      background-color: rgba(255,255,255,0.5);
      z-index: 5;
    }

    .room-pool .pool-ladder::before,
    .room-pool .pool-ladder::after {
      content: '';
      position: absolute;
      left: 0;
      width: 10px;
      height: 2px;
      background-color: rgba(255,255,255,0.7);
    }

    .room-pool .pool-ladder::before {
      top: 5px;
    }

    .room-pool .pool-ladder::after {
      top: 15px;
    }

    /* 游泳的人 */
    .room-pool .pool-swimmer {
      position: absolute;
      width: 10px;
      height: 5px;
      bottom: 25%;
      left: 40%;
      background-color: rgba(0,0,0,0.5);
      border-radius: 50% 50% 0 0;
      z-index: 4;
      animation: swimming 8s infinite linear;
    }

    .room-pool .pool-swimmer::before {
      content: '';
      position: absolute;
      width: 5px;
      height: 3px;
      top: -2px;
      left: 2.5px;
      background-color: rgba(0,0,0,0.6);
      border-radius: 50%;
    }

    .room-pool .pool-swimmer::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 3px;
      top: 3px;
      left: -1px;
      background-color: rgba(0,0,0,0.4);
      border-radius: 50%;
      animation: kicking 0.5s infinite alternate;
    }

    @keyframes swimming {
      0% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(30px) rotate(5deg); }
      50% { transform: translateX(60px) rotate(0deg); }
      75% { transform: translateX(30px) rotate(-5deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }

    @keyframes kicking {
      0% { transform: scaleX(0.8); }
      100% { transform: scaleX(1.2); }
    }

    /* 水面反光 */
    .room-pool .pool-reflection {
      position: absolute;
      width: 20px;
      height: 5px;
      bottom: 40%;
      left: 50%;
      background: radial-gradient(ellipse at center, rgba(255,255,255,0.5) 0%, transparent 70%);
      border-radius: 50%;
      animation: reflection-move 5s infinite alternate;
      z-index: 3;
    }

    @keyframes reflection-move {
      0% { opacity: 0.3; transform: translateX(-20px); }
      100% { opacity: 0.7; transform: translateX(20px); }
    }

    /* 悬停效果 */
    .room-pool:hover .pool-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-pool:hover .pool-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-pool:hover .pool-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-pool:hover .pool-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
      animation-duration: 1.5s;
    }

    .room-pool:hover .pool-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-pool:hover .pool-swimmer {
      animation-duration: 5s;
    }

    .room-meeting { 
      background: linear-gradient(160deg, #7e57c2, #5e35b1);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 会议室墙壁 - 创建3D空间感 */
    .room-meeting .meeting-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-meeting .meeting-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
    }

    /* 右墙 */
    .room-meeting .meeting-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
    }

    /* 后墙 */
    .room-meeting .meeting-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
    }

    /* 地板 */
    .room-meeting .meeting-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #4527a0, #673ab7);
      background-image: 
        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px),
        linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 20px 20px;
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-meeting .meeting-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #9575cd, #7e57c2);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-meeting .meeting-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-meeting .meeting-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-meeting .meeting-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-meeting .meeting-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-meeting .meeting-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(126,87,194,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-meeting .meeting-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-meeting .meeting-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-meeting .meeting-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-meeting .meeting-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-meeting .meeting-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 会议室装饰元素 */
    /* 会议桌 */
    .room-meeting .meeting-table {
      position: absolute;
      width: 35px;
      height: 20px;
      bottom: 25%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #4a148c;
      border-radius: 3px;
      z-index: 5;
    }

    .room-meeting .meeting-table::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 4px;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #311b92;
      border-radius: 2px;
    }

    .room-meeting .meeting-table::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      right: 2px;
      bottom: 2px;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
      border-radius: 2px;
    }

    /* 桌腿 */
    .room-meeting .meeting-table-leg {
      position: absolute;
      width: 4px;
      height: 15px;
      bottom: 10%;
      background-color: #311b92;
      z-index: 4;
    }

    .room-meeting .meeting-table-leg-left {
      left: 40%;
    }

    .room-meeting .meeting-table-leg-right {
      right: 40%;
    }

    /* 椅子 */
    .room-meeting .meeting-chair {
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: #311b92;
      border-radius: 2px;
      z-index: 5;
    }

    .room-meeting .meeting-chair::before {
      content: '';
      position: absolute;
      width: 1px;
      height: 7px;
      bottom: -7px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #26184b;
    }

    .room-meeting .meeting-chair::after {
      content: '';
      position: absolute;
      width: 4px;
      height: 4px;
      bottom: -1px;
      left: 2px;
      background-color: #26184b;
      border-radius: 50%;
      opacity: 0.6;
    }

    /* 投影屏幕 */
    .room-meeting .meeting-screen {
      position: absolute;
      width: 30px;
      height: 20px;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255,255,255,0.9);
      border: 1px solid rgba(0,0,0,0.2);
      z-index: 4;
    }

    .room-meeting .meeting-screen::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      right: 2px;
      bottom: 10px;
      background: linear-gradient(180deg, #bbdefb, #90caf9);
    }

    .room-meeting .meeting-screen::after {
      content: '';
      position: absolute;
      left: 15px;
      bottom: -15px;
      width: 1px;
      height: 15px;
      background-color: rgba(255,255,255,0.7);
    }

    /* 投影仪 */
    .room-meeting .meeting-projector {
      position: absolute;
      width: 12px;
      height: 6px;
      top: 35%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #212121;
      border-radius: 1px;
      z-index: 5;
    }

    .room-meeting .meeting-projector::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 3px;
      top: -3px;
      left: 3px;
      background-color: #424242;
      border-radius: 1px 1px 0 0;
    }

    .room-meeting .meeting-projector::after {
      content: '';
      position: absolute;
      width: 1px;
      height: 10px;
      top: -13px;
      left: 6px;
      background-color: #616161;
    }

    /* 演示文稿 */
    .room-meeting .meeting-presentation {
      position: absolute;
      width: 20px;
      height: 14px;
      top: 23%;
      left: 50%;
      transform: translateX(-50%);
      background-color: transparent;
      z-index: 4;
      overflow: hidden;
    }

    .room-meeting .meeting-presentation::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #e3f2fd, #bbdefb);
      animation: slide-change 8s infinite;
    }

    @keyframes slide-change {
      0%, 20% { transform: translateX(0); }
      25%, 45% { transform: translateX(-100%); }
      50%, 70% { transform: translateX(-200%); }
      75%, 95% { transform: translateX(-300%); }
      100% { transform: translateX(0); }
    }

    /* 笔记本电脑 */
    .room-meeting .meeting-laptop {
      position: absolute;
      width: 10px;
      height: 8px;
      bottom: 30%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #212121;
      border-radius: 1px;
      z-index: 6;
    }

    .room-meeting .meeting-laptop::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 5px;
      top: 1px;
      left: 1px;
      background-color: #81d4fa;
      border-radius: 1px;
    }

    .room-meeting .meeting-laptop::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 1px;
      bottom: -1px;
      left: 0;
      background-color: #424242;
    }

    /* 文件夹 */
    .room-meeting .meeting-folder {
      position: absolute;
      width: 7px;
      height: 5px;
      bottom: 31%;
      background-color: #ffeb3b;
      border-radius: 1px;
      z-index: 6;
      transform: rotate(-5deg);
    }

    .room-meeting .meeting-folder::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 3px;
      top: 1px;
      left: 0.5px;
      background: repeating-linear-gradient(
        90deg,
        rgba(0,0,0,0.1),
        rgba(0,0,0,0.1) 1px,
        transparent 1px,
        transparent 2px
      );
    }

    /* 水杯 */
    .room-meeting .meeting-cup {
      position: absolute;
      width: 4px;
      height: 5px;
      bottom: 31%;
      background-color: rgba(255,255,255,0.8);
      border-radius: 1px 1px 2px 2px;
      z-index: 6;
    }

    .room-meeting .meeting-cup::before {
      content: '';
      position: absolute;
      width: 3px;
      height: 3px;
      top: 1px;
      left: 0.5px;
      background-color: rgba(0,160,255,0.4);
      border-radius: 0 0 1px 1px;
    }

    @keyframes projector-flicker {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.6; }
      75% { opacity: 0.4; }
    }

    /* 悬停效果 */
    .room-meeting:hover .meeting-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-meeting:hover .meeting-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-meeting:hover .meeting-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-meeting:hover .meeting-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-meeting:hover .meeting-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-meeting:hover .meeting-projector-light {
      opacity: 0.7;
    }

    .room-computer { 
      background: linear-gradient(160deg, #26a69a, #00897b);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 电脑间墙壁 - 创建3D空间感 */
    .room-computer .computer-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-computer .computer-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
    }

    /* 右墙 */
    .room-computer .computer-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
    }

    /* 后墙 */
    .room-computer .computer-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
    }

    /* 地板 */
    .room-computer .computer-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #00695c, #00796b);
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-computer .computer-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #4db6ac, #26a69a);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-computer .computer-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-computer .computer-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-computer .computer-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-computer .computer-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-computer .computer-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(38,166,154,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-computer .computer-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-computer .computer-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-computer .computer-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-computer .computer-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-computer .computer-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 电脑间装饰元素 */
    .room-computer .computer-equipment {
      position: absolute;
      z-index: 5;
    }

    /* 电脑桌 */
    .room-computer .computer-desk {
      width: 40px;
      height: 10px;
      bottom: 20%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #455a64;
      border-radius: 2px;
      position: absolute;
      z-index: 5;
    }

    .room-computer .computer-desk::before {
      content: '';
      position: absolute;
      width: 5px;
      height: 10px;
      bottom: -10px;
      left: 5px;
      background-color: #37474f;
    }

    .room-computer .computer-desk::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 10px;
      bottom: -10px;
      right: 5px;
      background-color: #37474f;
    }

    /* 电脑显示器 */
    .room-computer .computer-monitor {
      width: 20px;
      height: 15px;
      bottom: 30%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #212121;
      border-radius: 2px;
      position: absolute;
      z-index: 6;
    }

    .room-computer .computer-monitor::before {
      content: '';
      position: absolute;
      width: 16px;
      height: 12px;
      top: 1px;
      left: 2px;
      background-color: #80deea;
      border-radius: 1px;
      animation: screen-flicker 4s infinite;
    }

    .room-computer .computer-monitor::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 3px;
      bottom: -3px;
      left: 6px;
      background-color: #424242;
      border-radius: 1px;
    }

    @keyframes screen-flicker {
      0%, 100% { background-color: #80deea; }
      25% { background-color: #4dd0e1; }
      50% { background-color: #26c6da; }
      75% { background-color: #00bcd4; }
    }

    /* 键盘 */
    .room-computer .computer-keyboard {
      width: 15px;
      height: 5px;
      bottom: 22%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #9e9e9e;
      border-radius: 1px;
      position: absolute;
      z-index: 6;
    }

    .room-computer .computer-keyboard::before {
      content: '';
      position: absolute;
      width: 13px;
      height: 3px;
      top: 1px;
      left: 1px;
      background: repeating-linear-gradient(
        90deg,
        rgba(255,255,255,0.1),
        rgba(255,255,255,0.1) 1px,
        transparent 1px,
        transparent 2px
      );
    }

    /* 鼠标 */
    .room-computer .computer-mouse {
      width: 5px;
      height: 8px;
      bottom: 22%;
      right: 30%;
      background-color: #bdbdbd;
      border-radius: 3px 3px 5px 5px;
      position: absolute;
      z-index: 6;
    }

    /* 电脑主机 */
    .room-computer .computer-tower {
      width: 10px;
      height: 20px;
      bottom: 20%;
      left: 20%;
      background-color: #424242;
      position: absolute;
      z-index: 5;
    }

    /* 电脑椅 */
    .room-computer .computer-chair {
      width: 12px;
      height: 10px;
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%) translateY(5px);
      background-color: #546e7a;
      border-radius: 2px 2px 0 0;
      position: absolute;
      z-index: 5;
    }

    .room-computer .computer-chair::before {
      content: '';
      position: absolute;
      width: 10px;
      height: 12px;
      bottom: -2px;
      left: 1px;
      background-color: #455a64;
      border-radius: 1px 1px 0 0;
    }

    .room-computer .computer-tower::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 1px;
      top: 3px;
      left: 2px;
      background-color: #616161;
    }

    .room-computer .computer-tower::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 2px;
      top: 7px;
      left: 4px;
      background-color: #00e676;
      border-radius: 50%;
      animation: blink 2s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* 电缆 */
    .room-computer .computer-cables {
      position: absolute;
      width: 30px;
      height: 3px;
      bottom: 18%;
      left: 35%;
      background: linear-gradient(
        90deg,
        transparent,
        #212121 10%,
        #424242 20%,
        #616161 30%,
        #212121 40%,
        #424242 50%,
        #616161 60%,
        #212121 70%,
        transparent
      );
      z-index: 4;
    }

    /* 悬停效果 */
    .room-computer:hover .computer-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-computer:hover .computer-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-computer:hover .computer-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-computer:hover .computer-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-computer:hover .computer-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-computer:hover .computer-monitor::before {
      animation-duration: 2s;
    }

    .room-library { background: linear-gradient(160deg, #9ccc65, #7cb342); }

    .room-library { 
      background: linear-gradient(160deg, #9ccc65, #7cb342);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 图书馆墙壁 - 创建3D空间感 */
    .room-library .library-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-library .library-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
    }

    /* 右墙 */
    .room-library .library-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
    }

    /* 后墙 */
    .room-library .library-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
    }

    /* 地板 */
    .room-library .library-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #558b2f, #689f38);
      background-image: 
        linear-gradient(90deg, rgba(139,195,74,0.3) 1px, transparent 1px),
        linear-gradient(rgba(139,195,74,0.3) 1px, transparent 1px);
      background-size: 15px 15px;
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-library .library-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #aed581, #9ccc65);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-library .library-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-library .library-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-library .library-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-library .library-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-library .library-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(156,204,101,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-library .library-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-library .library-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-library .library-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-library .library-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-library .library-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 图书馆装饰元素 */
    .room-library .library-equipment {
      position: absolute;
      z-index: 5;
    }

    /* 书架 */
    .room-library .library-shelves {
      width: 40px;
      height: 25px;
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #795548;
      border-radius: 2px;
      position: absolute;
      z-index: 5;
    }

    .room-library .library-shelves::before,
    .room-library .library-shelves::after {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background-color: rgba(0,0,0,0.3);
    }

    .room-library .library-shelves::before {
      top: 8px;
    }

    .room-library .library-shelves::after {
      top: 16px;
    }

    /* 书籍 */
    .room-library .library-books {
      width: 36px;
      height: 6px;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: repeating-linear-gradient(
        90deg,
        #f44336, #f44336 3px,
        #2196f3 3px, #2196f3 6px,
        #4caf50 6px, #4caf50 9px,
        #ff9800 9px, #ff9800 12px
      );
      z-index: 6;
      transition: all 0.3s ease;
    }

    .room-library .library-books::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 6px;
      top: -8px;
      left: 3px;
      background: repeating-linear-gradient(
        90deg,
        #9c27b0, #9c27b0 4px,
        #ffeb3b 4px, #ffeb3b 8px,
        #3f51b5 8px, #3f51b5 12px,
        #009688 12px, #009688 16px
      );
      transition: all 0.3s ease;
    }

    .room-library .library-books::after {
      content: '';
      position: absolute;
      width: 34px;
      height: 6px;
      top: -16px;
      left: 1px;
      background: repeating-linear-gradient(
        90deg,
        #607d8b, #607d8b 5px,
        #e91e63 5px, #e91e63 10px,
        #ffc107 10px, #ffc107 15px
      );
      transition: all 0.3s ease;
    }
    
    .room-library:hover .library-books {
      transform: translateX(-50%) translateY(-1px);
    }
    
    .room-library:hover .library-books::before {
      transform: translateY(-1px);
    }
    
    .room-library:hover .library-books::after {
      transform: translateY(-1px);
    }

    /* 阅读桌 */
    .room-library .library-table {
      width: 20px;
      height: 10px;
      bottom: 25%;
      right: 20%;
      background-color: #8d6e63;
      border-radius: 2px;
      position: absolute;
      z-index: 5;
    }
    
    .room-library .library-table::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 10px;
      bottom: -10px;
      left: 3px;
      background-color: #6d4c41;
    }
    
    .room-library .library-table::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 10px;
      bottom: -10px;
      right: 3px;
      background-color: #6d4c41;
    }

    /* 椅子 */
    .room-library .library-chair {
      width: 8px;
      height: 8px;
      bottom: 25%;
      right: 26%;
      background-color: #6d4c41;
      border-radius: 2px;
      position: absolute;
      z-index: 5;
    }
    
    .room-library .library-chair::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 2px;
      bottom: -2px;
      left: 1px;
      background-color: #5d4037;
      border-radius: 1px;
    }

    /* 台灯 */
    .room-library .library-lamp {
      width: 6px;
      height: 10px;
      bottom: 35%;
      right: 20%;
      z-index: 6;
      transition: all 0.3s ease;
    }

    .room-library .library-lamp::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 1px;
      bottom: 0;
      background-color: #5d4037;
      transition: all 0.3s ease;
    }

    .room-library .library-lamp::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 4px;
      bottom: 1px;
      left: -1px;
      background-color: #ffecb3;
      border-radius: 4px 4px 0 0;
      box-shadow: 0 0 5px #ffecb3;
      animation: lamp-flicker 3s infinite alternate;
      transition: all 0.3s ease;
    }

    @keyframes lamp-flicker {
      0%, 100% { opacity: 0.8; box-shadow: 0 0 5px #ffecb3; }
      25% { opacity: 0.9; box-shadow: 0 0 8px #ffecb3; transform: rotate(-1deg); }
      50% { opacity: 0.7; box-shadow: 0 0 3px #ffecb3; transform: rotate(1deg); }
      75% { opacity: 0.9; box-shadow: 0 0 6px #ffecb3; transform: rotate(-0.5deg); }
    }
    
    .room-library:hover .library-lamp::after {
      animation-duration: 1.5s;
      box-shadow: 0 0 10px #ffecb3;
    }

    /* 书本 */
    .room-library .library-open-book {
      width: 12px;
      height: 6px;
      bottom: 35%;
      right: 24%;
      background-color: #f5f5f5;
      border-radius: 1px;
      transform: perspective(20px) rotateX(5deg);
      z-index: 5;
      transition: all 0.3s ease;
    }

    .room-library .library-open-book::before,
    .room-library .library-open-book::after {
      content: '';
      position: absolute;
      top: 1px;
      bottom: 1px;
      width: 5px;
      background: repeating-linear-gradient(
        0deg,
        rgba(0,0,0,0.1),
        rgba(0,0,0,0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      transition: all 0.3s ease;
    }

    .room-library .library-open-book::before {
      left: 1px;
    }

    .room-library .library-open-book::after {
      right: 1px;
    }
    
    .room-library:hover .library-open-book {
      transform: perspective(20px) rotateX(15deg) translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    /* 悬停效果 */
    .room-library:hover .library-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-library:hover .library-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-library:hover .library-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-library:hover .library-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-library:hover .library-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-library:hover .library-lamp::after {
      animation-duration: 1.5s;
    }

    /* 客厅墙壁 - 创建3D空间感 */
    .room-livingroom .livingroom-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-livingroom .livingroom-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
    }

    /* 右墙 */
    .room-livingroom .livingroom-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
    }

    /* 后墙 */
    .room-livingroom .livingroom-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
    }

    /* 地板 */
    .room-livingroom .livingroom-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #d84315, #e64a19);
      background-image: 
        repeating-linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.1) 20px, transparent 20px, transparent 40px),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.1), rgba(255,255,255,0.1) 20px, transparent 20px, transparent 40px);
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-livingroom .livingroom-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #ffab91, #ff8a65);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-livingroom .livingroom-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-livingroom .livingroom-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-livingroom .livingroom-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-livingroom .livingroom-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-livingroom .livingroom-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(255,138,101,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-livingroom .livingroom-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-livingroom .livingroom-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-livingroom .livingroom-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-livingroom .livingroom-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-livingroom .livingroom-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 客厅装饰元素 */
    .room-livingroom .livingroom-furniture {
      position: absolute;
      z-index: 5;
    }

    /* 沙发 */
    .room-livingroom .livingroom-sofa {
      width: 30px;
      height: 12px;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #bf360c;
      border-radius: 3px 3px 0 0;
      transition: transform 0.3s ease;
    }

    .room-livingroom .livingroom-sofa::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 8px;
      bottom: -3px;
      left: 0;
      background-color: #8d2600;
      border-radius: 0 0 3px 3px;
    }

    .room-livingroom .livingroom-sofa::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 5px;
      top: -5px;
      left: 0;
      background-color: #bf360c;
      border-radius: 3px 3px 0 0;
    }
    
    .room-livingroom:hover .livingroom-sofa {
      transform: translateX(-50%) translateY(-2px);
    }

    /* 茶几 */
    .room-livingroom .livingroom-table {
      width: 20px;
      height: 5px;
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #8d6e63;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .room-livingroom .livingroom-table::before {
      content: '';
      position: absolute;
      width: 16px;
      height: 3px;
      top: -3px;
      left: 2px;
      background-color: rgba(255,255,255,0.2);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    .room-livingroom:hover .livingroom-table {
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    
    .room-livingroom:hover .livingroom-table::before {
      background-color: rgba(255,255,255,0.4);
    }

    /* 电视 */
    .room-livingroom .livingroom-tv {
      width: 20px;
      height: 12px;
      bottom: 30%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #212121;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .room-livingroom .livingroom-tv::before {
      content: '';
      position: absolute;
      width: 16px;
      height: 9px;
      top: 1.5px;
      left: 2px;
      background: linear-gradient(135deg, #03a9f4, #0288d1);
      border-radius: 1px;
      animation: tv-flicker 8s infinite;
    }

    @keyframes tv-flicker {
      0%, 100% { background: linear-gradient(135deg, #03a9f4, #0288d1); }
      25% { background: linear-gradient(135deg, #039be5, #0277bd); }
      50% { background: linear-gradient(135deg, #29b6f6, #0288d1); }
      75% { background: linear-gradient(135deg, #4fc3f7, #039be5); }
    }
    
    .room-livingroom:hover .livingroom-tv {
      transform: translateX(-50%) scale(1.05);
      box-shadow: 0 0 8px rgba(3, 169, 244, 0.5);
    }

    /* 电视柜 */
    .room-livingroom .livingroom-tv-stand {
      width: 24px;
      height: 5px;
      bottom: 25%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #5d4037;
      border-radius: 1px;
      z-index: 1;
      transition: all 0.3s ease;
    }
    
    .room-livingroom:hover .livingroom-tv-stand {
      background-color: #6d4c41;
    }

    /* 地毯 */
    .room-livingroom .livingroom-carpet {
      width: 40px;
      height: 25px;
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%) rotateX(60deg);
      background: linear-gradient(45deg, #ffccbc, #ffab91);
      border-radius: 3px;
      z-index: 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .room-livingroom .livingroom-carpet::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      right: 2px;
      bottom: 2px;
      border: 1px dashed rgba(255,255,255,0.5);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    .room-livingroom:hover .livingroom-carpet {
      background: linear-gradient(45deg, #ffab91, #ff8a65);
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }
    
    .room-livingroom:hover .livingroom-carpet::before {
      border: 1px dashed rgba(255,255,255,0.7);
    }

    /* 植物 */
    .room-livingroom .livingroom-plant {
      width: 8px;
      height: 12px;
      bottom: 20%;
      right: 15%;
      z-index: 6;
    }

    .room-livingroom .livingroom-plant::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 6px;
      bottom: 0;
      left: 1px;
      background-color: #5d4037;
      border-radius: 0 0 3px 3px;
    }

    .room-livingroom .livingroom-plant::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 8px;
      bottom: 6px;
      left: -1px;
      background-color: #66bb6a;
      border-radius: 50%;
      box-shadow: -3px -2px 0 #43a047, 3px -2px 0 #43a047, 0 -4px 0 #43a047;
    }

    /* 悬停效果 */
    .room-livingroom:hover .livingroom-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-livingroom:hover .livingroom-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-livingroom:hover .livingroom-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-livingroom:hover .livingroom-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-livingroom:hover .livingroom-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-livingroom:hover .livingroom-tv::before {
      animation-duration: 3s;
    }

    .room-cafe { 
      background: linear-gradient(160deg, #795548, #5d4037);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 咖啡厅墙壁 - 创建3D空间感 */
    .room-cafe .cafe-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-cafe .cafe-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
    }

    /* 右墙 */
    .room-cafe .cafe-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
    }

    /* 后墙 */
    .room-cafe .cafe-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
    }

    /* 地板 */
    .room-cafe .cafe-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #4e342e, #5d4037);
      background-image: 
        repeating-linear-gradient(90deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 2px, transparent 2px, transparent 15px),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 2px, transparent 2px, transparent 15px);
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-cafe .cafe-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #8d6e63, #795548);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-cafe .cafe-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-cafe .cafe-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-cafe .cafe-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-cafe .cafe-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-cafe .cafe-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(121,85,72,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-cafe .cafe-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-cafe .cafe-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-cafe .cafe-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-cafe .cafe-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-cafe .cafe-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 咖啡厅装饰元素 */
    .room-cafe .cafe-item {
      position: absolute;
      z-index: 5;
    }

    /* 咖啡桌 */
    .room-cafe .cafe-table {
      width: 20px;
      height: 20px;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%) rotateX(60deg);
      background-color: #3e2723;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .room-cafe .cafe-table::before {
      content: '';
      position: absolute;
      width: 5px;
      height: 15px;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #3e2723;
      transition: all 0.3s ease;
    }
    
    .room-cafe:hover .cafe-table {
      background-color: #4e342e;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* 咖啡杯 */
    .room-cafe .cafe-cup {
      width: 8px;
      height: 6px;
      bottom: 20%;
      left: 46%;
      background-color: #f5f5f5;
      border-radius: 0 0 4px 4px;
      z-index: 6;
      transition: all 0.3s ease;
    }

    .room-cafe .cafe-cup::before {
      content: '';
      position: absolute;
      width: 4px;
      height: 3px;
      top: 1px;
      right: -3px;
      background-color: #f5f5f5;
      border-radius: 0 3px 3px 0;
      transition: all 0.3s ease;
    }

    .room-cafe .cafe-cup::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 2px;
      top: -2px;
      left: 1px;
      background-color: #795548;
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    .room-cafe:hover .cafe-cup {
      transform: translateY(-1px) rotate(3deg);
    }
    
    .room-cafe:hover .cafe-cup::after {
      background-color: #8d6e63;
    }

    /* 咖啡蒸汽 */
    .room-cafe .cafe-steam {
      position: absolute;
      width: 1px;
      height: 5px;
      bottom: 38%;
      left: 48%;
      background: linear-gradient(to top, rgba(255,255,255,0.8), transparent);
      border-radius: 50%;
      opacity: 0;
      animation: steam-rise 3s infinite;
      z-index: 6;
      transition: all 0.3s ease;
    }

    .room-cafe .cafe-steam:nth-child(2) {
      left: 46%;
      height: 7px;
      animation-delay: 0.5s;
    }

    .room-cafe .cafe-steam:nth-child(3) {
      left: 50%;
      height: 6px;
      animation-delay: 1s;
    }

    @keyframes steam-rise {
      0% { transform: translateY(0) scale(0.5); opacity: 0; }
      20% { opacity: 0.8; transform: translateY(-3px) scale(1.0) rotate(-2deg); }
      60% { opacity: 0.6; transform: translateY(-8px) scale(1.3) rotate(2deg); }
      100% { transform: translateY(-15px) scale(2.0) rotate(-1deg); opacity: 0; }
    }

    /* 咖啡机 */
    .room-cafe .cafe-machine {
      width: 15px;
      height: 12px;
      bottom: 25%;
      right: 20%;
      background-color: #424242;
      border-radius: 2px;
    }

    .room-cafe .cafe-machine::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 5px;
      top: -5px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #616161;
      border-radius: 2px 2px 0 0;
    }

    .room-cafe .cafe-machine::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 2px;
      top: 3px;
      right: 3px;
      background-color: #f44336;
      border-radius: 50%;
      animation: blink 2s infinite;
    }

    /* 糕点展示柜 */
    .room-cafe .cafe-pastry-case {
      width: 12px;
      height: 10px;
      bottom: 25%;
      left: 20%;
      background-color: rgba(255,255,255,0.7);
      border: 1px solid #8d6e63;
      border-radius: 1px;
    }

    .room-cafe .cafe-pastry-case::before {
      content: '';
      position: absolute;
      width: 10px;
      height: 1px;
      top: 5px;
      left: 1px;
      background-color: rgba(255,255,255,0.5);
    }

    .room-cafe .cafe-pastry-case::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 3px;
      top: 2px;
      left: 2px;
      background: linear-gradient(90deg, #ffcc80, #ffb74d, #ffa726);
    }

    /* 悬停效果 */
    .room-cafe:hover .cafe-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-cafe:hover .cafe-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-cafe:hover .cafe-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-cafe:hover .cafe-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-cafe:hover .cafe-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-cafe:hover .cafe-steam {
      animation-duration: 2s;
    }

    .room-studio { 
      background: linear-gradient(160deg, #90a4ae, #607d8b);
      position: relative;
      overflow: hidden;
      perspective: 300px;
      transform-style: preserve-3d;
    }

    /* 工作室墙壁 - 创建3D空间感 */
    .room-studio .studio-wall {
      position: absolute;
      background-color: rgba(0,0,0,0.1);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      z-index: 1;
    }

    /* 左墙 */
    .room-studio .studio-wall-left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 15px;
      transform: rotateY(60deg);
      transform-origin: left center;
      background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
    }

    /* 右墙 */
    .room-studio .studio-wall-right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 15px;
      transform: rotateY(-60deg);
      transform-origin: right center;
      background: linear-gradient(to left, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
    }

    /* 后墙 */
    .room-studio .studio-wall-back {
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      transform: rotateX(60deg);
      transform-origin: top center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
    }

    /* 地板 */
    .room-studio .studio-floor {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 50%;
      transform: rotateX(60deg);
      transform-origin: bottom center;
      background: linear-gradient(45deg, #455a64, #546e7a);
      background-image: 
        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px),
        linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 10px 10px;
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      z-index: -1;
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }

    /* 天花板 */
    .room-studio .studio-ceiling {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 30%;
      transform: rotateX(-60deg);
      transform-origin: top center;
      background: linear-gradient(to top, #b0bec5, #90a4ae);
      z-index: -1;
      transition: transform 0.5s ease, background 0.5s ease;
    }

    /* 墙角连接 */
    .room-studio .studio-corner {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: rgba(0,0,0,0.25);
      z-index: 2;
    }

    /* 左上角 */
    .room-studio .studio-corner-top-left {
      top: 0;
      left: 0;
      transform: rotateX(-30deg) rotateY(30deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
      border-radius: 0 0 50% 0;
    }

    /* 右上角 */
    .room-studio .studio-corner-top-right {
      top: 0;
      right: 0;
      transform: rotateX(-30deg) rotateY(-30deg);
      background: linear-gradient(225deg, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
      border-radius: 0 0 0 50%;
    }

    /* 左下角 */
    .room-studio .studio-corner-bottom-left {
      bottom: 0;
      left: 0;
      transform: rotateX(30deg) rotateY(30deg);
      background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
      border-radius: 0 50% 0 0;
    }

    /* 右下角 */
    .room-studio .studio-corner-bottom-right {
      bottom: 0;
      right: 0;
      transform: rotateX(30deg) rotateY(-30deg);
      background: linear-gradient(315deg, rgba(0,0,0,0.3), rgba(144,164,174,0.1));
      border-radius: 50% 0 0 0;
    }

    /* 添加边缘线条增强连接感 */
    .room-studio .studio-edge {
      position: absolute;
      background-color: rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* 左侧边缘 */
    .room-studio .studio-edge-left {
      left: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 右侧边缘 */
    .room-studio .studio-edge-right {
      right: 0;
      top: 15px;
      bottom: 15px;
      width: 2px;
    }

    /* 顶部边缘 */
    .room-studio .studio-edge-top {
      top: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 底部边缘 */
    .room-studio .studio-edge-bottom {
      bottom: 0;
      left: 15px;
      right: 15px;
      height: 2px;
    }

    /* 工作室装饰元素 */
    .room-studio .studio-item {
      position: absolute;
      z-index: 5;
    }

    /* 画架 */
    .room-studio .studio-easel {
      width: 20px;
      height: 25px;
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%);
      position: absolute;
      z-index: 5;
    }

    .room-studio .studio-easel::before {
      content: '';
      position: absolute;
      width: 18px;
      height: 2px;
      bottom: 0;
      left: 1px;
      background-color: #5d4037;
    }

    .room-studio .studio-easel::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 20px;
      bottom: 2px;
      left: 2px;
      background-color: #f5f5f5;
      border: 1px solid #5d4037;
    }

    /* 画布 */
    .room-studio .studio-canvas {
      width: 14px;
      height: 18px;
      bottom: 19%;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #81c784, #4caf50, #2e7d32);
      z-index: 6;
      position: absolute;
    }

    /* 调色板 */
    .room-studio .studio-palette {
      width: 10px;
      height: 10px;
      bottom: 25%;
      right: 25%;
      background-color: #a1887f;
      border-radius: 50%;
      transform: rotateX(60deg);
      position: absolute;
      z-index: 5;
    }

    .room-studio .studio-palette::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      top: 1px;
      left: 1px;
      background: radial-gradient(
        circle at center,
        #f44336 10%,
        #2196f3 30%,
        #ffeb3b 50%,
        #4caf50 70%,
        #9c27b0 90%
      );
      border-radius: 50%;
    }

    /* 画笔 */
    .room-studio .studio-brush {
      width: 1px;
      height: 12px;
      bottom: 25%;
      right: 30%;
      background-color: #8d6e63;
      transform: rotate(-30deg);
      position: absolute;
      z-index: 5;
    }

    .room-studio .studio-brush::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 3px;
      top: -3px;
      left: -0.5px;
      background-color: #ffcc80;
      border-radius: 2px 2px 0 0;
    }

    /* 工作灯 */
    .room-studio .studio-lamp {
      width: 10px;
      height: 15px;
      bottom: 30%;
      left: 25%;
      position: absolute;
      z-index: 5;
    }

    .room-studio .studio-lamp::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 15px;
      bottom: 0;
      left: 4px;
      background-color: #424242;
    }

    .room-studio .studio-lamp::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 5px;
      top: 0;
      left: 1px;
      background-color: #fdd835;
      border-radius: 5px 5px 0 0;
      box-shadow: 0 0 8px #fdd835;
      animation: lamp-glow 4s infinite alternate;
    }

    /* 工作台 */
    .room-studio .studio-workbench {
      width: 30px;
      height: 8px;
      bottom: 10%;
      left: 30%;
      background-color: #8d6e63;
      border-radius: 2px;
      position: absolute;
      z-index: 5;
    }

    .room-studio .studio-workbench::before {
      content: '';
      position: absolute;
      width: 3px;
      height: 6px;
      bottom: -6px;
      left: 3px;
      background-color: #6d4c41;
    }

    .room-studio .studio-workbench::after {
      content: '';
      position: absolute;
      width: 3px;
      height: 6px;
      bottom: -6px;
      right: 3px;
      background-color: #6d4c41;
    }

    /* 雕塑 */
    .room-studio .studio-sculpture {
      width: 10px;
      height: 15px;
      bottom: 18%;
      left: 30%;
      background-color: #e0e0e0;
      border-radius: 40% 40% 20% 20%;
      position: absolute;
      z-index: 6;
    }

    .room-studio .studio-sculpture::before {
      content: '';
      position: absolute;
      width: 6px;
      height: 8px;
      bottom: -3px;
      left: 2px;
      background-color: #bdbdbd;
      border-radius: 2px;
    }

    /* 颜料点 */
    .room-studio .studio-paint {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      z-index: 6;
    }

    @keyframes lamp-glow {
      0%, 100% { box-shadow: 0 0 8px #fdd835; }
      50% { box-shadow: 0 0 12px #fdd835; }
    }

    /* 悬停效果 */
    .room-studio:hover .studio-wall-left {
      transform: rotateY(70deg);
      transition: transform 0.5s ease;
    }

    .room-studio:hover .studio-wall-right {
      transform: rotateY(-70deg);
      transition: transform 0.5s ease;
    }

    .room-studio:hover .studio-wall-back {
      transform: rotateX(70deg);
      transition: transform 0.5s ease;
    }

    .room-studio:hover .studio-floor {
      transform: rotateX(65deg);
      box-shadow: inset 0 5px 30px rgba(0,0,0,0.3);
      transition: all 0.5s ease;
    }

    .room-studio:hover .studio-ceiling {
      transform: rotateX(-65deg);
      transition: transform 0.5s ease;
    }

    .room-studio:hover .studio-lamp::after {
      animation-duration: 2s;
    }

    /* 歇山顶屋顶样式 - 中国传统建筑风格 */
    .floor-roof {
      width: 130%;
      height: 150px;
      position: relative;
      left: -15%;
      margin-bottom: 30px;
      transform-style: preserve-3d;
      perspective: 800px;
      z-index: 20;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .roof-content {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      display: block;
      overflow: visible;
    }
    
    /* 屋顶主体 - 歇山顶样式 */
    .roof-main {
      position: absolute;
      width: 100%;
      height: 70%;
      bottom: 0;
      background: linear-gradient(to bottom, #5D4037, #8B4513);
      clip-path: polygon(0 100%, 0 60%, 15% 30%, 50% 0, 85% 30%, 100% 60%, 100% 100%);
      box-shadow: 0 5px 20px rgba(0,0,0,0.7);
      transform-style: preserve-3d;
      z-index: 5;
    }
    
    /* 屋顶瓦片纹理 */
    .roof-tiles {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background-image: 
        repeating-linear-gradient(
          to bottom,
          transparent,
          transparent 4px,
          rgba(0,0,0,0.3) 4px,
          rgba(0,0,0,0.3) 8px
        );
      clip-path: polygon(0 100%, 0 60%, 15% 30%, 50% 0, 85% 30%, 100% 60%, 100% 100%);
    }
    
    /* 正脊 - 屋顶中央最高的水平脊 */
    .roof-ridge {
      position: absolute;
      width: 70%;
      height: 12px;
      top: 30%;
      left: 15%;
      background: linear-gradient(to bottom, #D4AF37, #B8860B);
      border-radius: 6px 6px 0 0;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.3);
      z-index: 10;
    }
    
    /* 垂脊 - 从屋顶正脊到屋檐角的斜脊 */
    .roof-vertical-ridge {
      position: absolute;
      width: 10px;
      height: 80px;
      top: 30%;
      background: linear-gradient(to bottom, #D4AF37, #B8860B);
      transform-origin: top center;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      z-index: 8;
    }
    
    .roof-vertical-ridge-left {
      left: 15%;
      transform: rotate(30deg) skewX(-10deg);
    }
    
    .roof-vertical-ridge-right {
      right: 15%;
      transform: rotate(-30deg) skewX(10deg);
    }
    
    /* 戗脊 - 从垂脊到屋檐的连接脊 */
    .roof-slant-ridge {
      position: absolute;
      width: 8px;
      height: 50px;
      background: linear-gradient(to bottom, #D4AF37, #B8860B);
      transform-origin: top center;
      border-radius: 4px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      z-index: 7;
    }
    
    .roof-slant-ridge-left-front {
      top: 60%;
      left: 15%;
      transform: rotate(-15deg);
    }
    
    .roof-slant-ridge-right-front {
      top: 60%;
      right: 15%;
      transform: rotate(15deg);
    }
    
    .roof-slant-ridge-left-back {
      top: 60%;
      left: 25%;
      transform: rotate(-40deg);
    }
    
    .roof-slant-ridge-right-back {
      top: 60%;
      right: 25%;
      transform: rotate(40deg);
    }
    
    /* 屋檐 - 歇山顶特有的两层檐结构 */
    .roof-eave {
      position: absolute;
      width: 110%;
      height: 15px;
      bottom: 0;
      left: -5%;
      background: linear-gradient(to bottom, #8B4513, #5D4037);
      border-bottom: 3px solid #5D4037;
      transform: rotateX(-10deg);
      box-shadow: 0 8px 15px rgba(0,0,0,0.5);
      z-index: 9;
    }
    
    /* 上层屋檐 - 山墙部分 */
    .roof-upper-eave {
      position: absolute;
      width: 100%;
      height: 12px;
      top: 60%;
      background: linear-gradient(to bottom, #8B4513, #5D4037);
      border-bottom: 2px solid #5D4037;
      transform: rotateX(-5deg);
      box-shadow: 0 5px 10px rgba(0,0,0,0.4);
      z-index: 8;
      clip-path: polygon(0 0, 0 100%, 15% 100%, 15% 0, 85% 0, 85% 100%, 100% 100%, 100% 0);
    }
    
    /* 博风板 - 山墙顶部装饰板 */
    .roof-gable-board {
      position: absolute;
      width: 70%;
      height: 10px;
      top: 30%;
      left: 15%;
      background-color: #D4AF37;
      transform: rotateX(-20deg);
      box-shadow: 0 -2px 5px rgba(0,0,0,0.3);
      z-index: 6;
    }
    
    /* 屋顶角翘 */
    .roof-corner {
      position: absolute;
      width: 20%;
      height: 35px;
      bottom: 0;
      background-color: #8B4513;
      transform-origin: bottom center;
      box-shadow: 0 5px 10px rgba(0,0,0,0.4);
      z-index: 10;
    }
    
    .roof-corner-left {
      left: -5%;
      transform: rotateZ(15deg) rotateX(-15deg);
      clip-path: polygon(0 100%, 100% 100%, 80% 0);
    }
    
    .roof-corner-right {
      right: -5%;
      transform: rotateZ(-15deg) rotateX(-15deg);
      clip-path: polygon(0 100%, 20% 0, 100% 100%);
    }
    
    /* 脊兽 - 屋脊上的装饰兽 */
    .roof-beast {
      position: absolute;
      width: 30px;
      height: 35px;
      top: 20%;
      background-color: #D4AF37;
      clip-path: polygon(
        50% 0, 
        80% 20%, 
        90% 40%,
        100% 60%,
        80% 80%,
        70% 100%,
        30% 100%,
        20% 80%,
        0 60%,
        10% 40%,
        20% 20%
      );
      box-shadow: 0 0 15px rgba(255,215,0,0.8);
      z-index: 11;
    }
    
    .roof-beast-center {
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 45px;
      top: 15%;
    }
    
    .roof-beast-left {
      left: 15%;
    }
    
    .roof-beast-right {
      right: 15%;
    }
    
    /* 正吻 - 屋脊两端的装饰 */
    .roof-end-beast {
      position: absolute;
      width: 25px;
      height: 30px;
      top: 30%;
      background-color: #D4AF37;
      clip-path: polygon(
        0 30%,
        30% 0,
        70% 0,
        100% 30%,
        80% 100%,
        20% 100%
      );
      box-shadow: 0 0 10px rgba(255,215,0,0.6);
      z-index: 11;
    }
    
    .roof-end-beast-left {
      left: 15%;
      transform: translateX(-100%);
    }
    
    .roof-end-beast-right {
      right: 15%;
      transform: translateX(100%);
    }
    
    /* 屋脊装饰 - 吉祥物 */
    .roof-decoration {
      position: absolute;
      width: 15px;
      height: 15px;
      top: 25%;
      background: radial-gradient(circle at center, #FFD700, #D4AF37);
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(255,215,0,0.6);
      z-index: 11;
    }
    
    /* 中央主装饰 */
    .roof-decoration-center {
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 30px;
      top: 20%;
      z-index: 12;
    }
    
    /* 脊饰 - 屋脊装饰图案 */
    .roof-dragon {
      position: absolute;
      width: 70%;
      height: 18px;
      top: 30%;
      left: 15%;
      background-color: transparent;
      z-index: 10;
      overflow: visible;
    }
    
    .roof-dragon::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: -10px;
      background-color: #D4AF37;
      clip-path: polygon(
        0 100%, 5% 50%, 10% 100%, 15% 50%,
        20% 100%, 25% 50%, 30% 100%, 35% 50%,
        40% 100%, 45% 50%, 50% 100%, 55% 50%,
        60% 100%, 65% 50%, 70% 100%, 75% 50%,
        80% 100%, 85% 50%, 90% 100%, 95% 50%,
        100% 100%
      );
      box-shadow: 0 -3px 5px rgba(0,0,0,0.3);
    }
    
    /* 挑檐 - 屋檐悬挑部分 */
    .roof-flying-eave {
      position: absolute;
      width: 120%;
      height: 8px;
      bottom: 10px;
      left: -10%;
      background: linear-gradient(to bottom, #5D4037, #3E2723);
      transform: rotateX(20deg);
      z-index: 6;
    }
    
    /* 斗栱结构 - 支撑屋檐的传统构件 */
    .roof-bracket {
      position: absolute;
      width: 30px;
      height: 25px;
      bottom: 0;
      background-color: #5D4037;
      clip-path: polygon(
        0 100%,
        10% 80%,
        20% 100%,
        30% 80%,
        40% 100%,
        50% 80%,
        60% 100%,
        70% 80%,
        80% 100%,
        90% 80%,
        100% 100%,
        100% 40%,
        0 40%
      );
      z-index: 9;
    }
    
    .roof-bracket-1 { left: 10%; }
    .roof-bracket-2 { left: 30%; }
    .roof-bracket-3 { left: 50%; transform: translateX(-50%); }
    .roof-bracket-4 { right: 30%; }
    .roof-bracket-5 { right: 10%; }
    
    /* 瓦当 - 檐头瓦装饰 */
    .roof-tile-end {
      position: absolute;
      width: 15px;
      height: 15px;
      bottom: 0;
      background-color: #8B4513;
      border-radius: 50%;
      z-index: 10;
      overflow: hidden;
    }
    
    .roof-tile-end::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(0,0,0,0), rgba(0,0,0,0.4));
    }
    
    .roof-tile-end-1 { left: 5%; }
    .roof-tile-end-2 { left: 25%; }
    .roof-tile-end-3 { left: 45%; }
    .roof-tile-end-4 { left: 65%; }
    .roof-tile-end-5 { left: 85%; }
    
    /* 屋顶动画效果 */
    @keyframes roof-beast-glow {
      0% { box-shadow: 0 0 10px rgba(255,215,0,0.6); }
      50% { box-shadow: 0 0 20px rgba(255,215,0,0.9); }
      100% { box-shadow: 0 0 10px rgba(255,215,0,0.6); }
    }
    
    .roof-beast, .roof-end-beast, .roof-decoration {
      animation: roof-beast-glow 4s infinite;
    }
    
    @keyframes roof-sway {
      0%, 100% { transform: rotateY(0deg); }
      50% { transform: rotateY(1deg); }
    }
    
    .floor-roof:hover .roof-content {
      animation: roof-sway 5s infinite ease-in-out;
    }

    /* 投影仪光线 */
    .room-meeting .meeting-projector-light {
      position: absolute;
      top: 41%;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 40px;
      background: linear-gradient(to bottom, rgba(255,255,255,0.1), transparent);
      clip-path: polygon(0 0, 100% 0, 80% 100%, 20% 100%);
      opacity: 0.5;
      z-index: 3;
      animation: projector-flicker 3s infinite alternate;
    }

    @keyframes projector-flicker {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.6; }
      75% { opacity: 0.4; }
    }

    /* 阳台装饰元素 */
    .floor-balcony-left::after,
    .floor-balcony-right::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      bottom: 10px;
      background-color: rgba(144, 164, 174, 0.8);
      border-radius: 2px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .floor-balcony-left::after {
      left: 15px;
    }
    
    .floor-balcony-right::after {
      right: 15px;
    }
    
    /* 为阳台添加植物装饰 */
    .floor-balcony-plant {
      position: absolute;
      width: 12px;
      height: 15px;
      bottom: 25px;
      z-index: 2;
    }
    
    .floor-balcony-left .floor-balcony-plant {
      right: 5px;
    }
    
    .floor-balcony-right .floor-balcony-plant {
      left: 5px;
    }
    
    .floor-balcony-plant::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      bottom: 0;
      left: 2px;
      background-color: #795548;
      border-radius: 2px;
    }
    
    .floor-balcony-plant::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 10px;
      bottom: 5px;
      left: 0;
      background-color: #66bb6a;
      border-radius: 50% 50% 35% 35%;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      animation: plant-sway 3s ease-in-out infinite alternate;
    }
    
    @keyframes plant-sway {
      0% { transform: rotate(-5deg); }
      100% { transform: rotate(5deg); }
    }
  </style>
</head>
<body>
  <!-- 背景层 -->
  <div class="city-bg">
    <div class="sky"></div>
    <div class="mountains" id="mountains"></div>
    <div class="buildings-back" id="buildingsBack"></div>
    <div class="buildings" id="buildings"></div>
    <div class="buildings-front" id="buildingsFront"></div>
  </div>
  
  <!-- 云层 -->
  <div class="clouds" id="clouds"></div>
  <!-- 动态元素 -->
  <div class="dynamic-elements" id="dynamicElements"></div>
  
  <!-- 主内容 -->
  <div class="container">
    <div class="title">
      <h1 class="pixel-text">心之楼</h1>
      <p>在这里构建你的内心世界，每一层代表你的一个心灵层面。</p>
    </div>
    
    <div class="action-bar">
      <button class="button" id="addFloorBtn">添加新楼层</button>
    </div>
    
    <div class="tower-container">
      <div class="tower" id="tower">
        <!-- 楼层将通过JavaScript添加 -->
        <div class="construction-site" id="constructionSite">
          <p class="construction-message">这里将建起你的心之楼</p>
          <p style="font-size: 12px;">点击"添加新楼层"按钮开始建造</p>
          <div class="crane">
            <div class="crane-base"></div>
            <div class="crane-arm"></div>
            <div class="crane-cable"></div>
          </div>
          <div class="construction-ground"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 添加楼层模态框 -->
  <div class="modal" id="addFloorModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">添加新楼层</h3>
      </div>
      <form id="addFloorForm">
        <div class="form-group">
          <label class="form-label" for="floorName">楼层名称</label>
          <input type="text" class="form-control" id="floorName" required>
        </div>
        <div class="modal-footer">
          <button type="button" class="button button-cancel" id="cancelAddFloorBtn">取消</button>
          <button type="submit" class="button">添加楼层</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- 添加房间模态框 -->
  <div class="modal" id="addRoomModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">在"<span id="targetFloorName"></span>"中添加房间</h3>
      </div>
      <form id="addRoomForm">
        <div class="form-group">
          <label class="form-label" for="roomName">房间名称</label>
          <input type="text" class="form-control" id="roomName" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="roomContent">心灵记录</label>
          <textarea class="form-control" id="roomContent" placeholder="在这里记录你的想法、感受或心灵活动..." required></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="button button-cancel" id="cancelAddRoomBtn">取消</button>
          <button type="submit" class="button">添加房间</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 查看房间模态框 -->
  <div class="modal" id="viewRoomsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">"<span id="viewFloorName"></span>"的房间列表</h3>
      </div>
      <div id="roomsList"></div>
      <div id="roomsListActions" style="margin-top: 10px;"></div>
      <div class="modal-footer">
        <button type="button" class="button" id="closeViewRoomsBtn">关闭</button>
      </div>
    </div>
  </div>
  
  <script>
    // 房间类型列表
    const roomTypes = [
      { type: 'cafe', name: '咖啡馆' },
      { type: 'livingroom', name: '休息室' },
      { type: 'gym', name: '运动馆' },
      { type: 'pool', name: '游泳池' },
      { type: 'meeting', name: '会议室' },
      { type: 'computer', name: '电脑间' },
      { type: 'library', name: '图书馆' },
      { type: 'garden', name: '空中花园' },
      { type: 'studio', name: '艺术工作室' }
    ];
    
    // 随机获取房间类型
    function getRandomRoomType() {
      return roomTypes[Math.floor(Math.random() * roomTypes.length)];
    }
    
    // 从localStorage加载数据
    let towerData = { floors: [] };
    try {
      const savedData = localStorage.getItem('towerData');
      if (savedData) {
        towerData = JSON.parse(savedData);
      }
    } catch (e) {
      console.error('无法加载保存的数据', e);
    }
    
    // 数据结构说明：
    // towerData.floors 数组中，索引0是最顶层，最后一个元素是最底层
    // 新添加的楼层会被放在数组末尾（push），成为新的底层
    // 渲染时，我们从数组开头开始遍历，先渲染顶层，再渲染底层
    
    // 保存数据到localStorage
    function saveData() {
      localStorage.setItem('towerData', JSON.stringify(towerData));
    }
    
    // DOM元素
    const tower = document.getElementById('tower');
    const constructionSite = document.getElementById('constructionSite');
    const addFloorBtn = document.getElementById('addFloorBtn');
    const addFloorModal = document.getElementById('addFloorModal');
    const addRoomModal = document.getElementById('addRoomModal');
    const viewRoomsModal = document.getElementById('viewRoomsModal');
    const floorNameInput = document.getElementById('floorName');
    const roomNameInput = document.getElementById('roomName');
    const roomContentInput = document.getElementById('roomContent');
    const targetFloorName = document.getElementById('targetFloorName');
    const viewFloorName = document.getElementById('viewFloorName');
    const roomsList = document.getElementById('roomsList');
    
    // 当前选中的楼层
    let selectedFloorIndex = null;
    
    // 创建城市建筑
    function createBuildings() {
      // 清空现有建筑
      const buildingsBack = document.getElementById('buildingsBack');
      const buildingsMiddle = document.getElementById('buildings');
      const buildingsFront = document.getElementById('buildingsFront');
      
      buildingsBack.innerHTML = '';
      buildingsMiddle.innerHTML = '';
      buildingsFront.innerHTML = '';
      
      // 创建三层建筑群
      createBuildingLayer(buildingsBack, 30, 0.4, 0.7); // 后层，较多较窄的建筑
      createBuildingLayer(buildingsMiddle, 25, 0.6, 1.0); // 中层，平衡的建筑
      createBuildingLayer(buildingsFront, 15, 1.0, 1.5); // 前层，较少较宽的建筑
    }
    
    // 创建单层建筑
    function createBuildingLayer(container, count, minWidthFactor, maxWidthFactor) {
      for (let i = 0; i < count; i++) {
        const building = document.createElement('div');
        building.className = 'building';
        
        // 设置高度
        const heightPercentage = Math.random() * 150 + 20;
        building.style.height = `${heightPercentage}%`;
        building.style.zIndex = Math.floor(heightPercentage);

        // 设置宽度 - 增加楼体宽度
        const widthFactor = Math.random() * (maxWidthFactor - minWidthFactor) + minWidthFactor;
        building.style.flexGrow = widthFactor;
        building.style.flexBasis = `${widthFactor * 3}%`;

        // 应用形状 - 增加复杂形状的概率
        if (Math.random() > 0.3) { // 70% 的建筑有特殊形状
          const simpleShapes = ['building-tapered', 'building-spire', 'building-stepped', 'building-cutout'];
          const complexShapes = ['building-complex-1', 'building-complex-2', 'building-complex-3', 'building-complex-4'];
          
          // 50% 概率使用复杂形状
          const shapeList = Math.random() > 0.5 ? complexShapes : simpleShapes;
          const shape = shapeList[Math.floor(Math.random() * shapeList.length)];
          building.classList.add(shape);
        }

        // 应用颜色 - 使用更多丰富的颜色选项
        const colorOptions = [
          'dark', 'light', 'gradient', 'accent', 
          'purple', 'blue', 'green', 'yellow', 
          'orange', 'teal', 'pink', 'cyan'
        ];
        
        // 提高彩色建筑的比例
        if (Math.random() < 0.7) { // 70%的建筑使用彩色
          // 从索引2开始是彩色选项
          const colorIndex = Math.floor(Math.random() * (colorOptions.length - 2)) + 2;
          building.classList.add(`building-${colorOptions[colorIndex]}`);
        } else {
          // 30%的建筑使用暗色调
          const darkColorIndex = Math.floor(Math.random() * 2); // 只使用dark和light
          building.classList.add(`building-${colorOptions[darkColorIndex]}`);
        }
        
        // 添加窗户 - 根据建筑大小调整窗户数量
        const windowCount = Math.floor(Math.random() * 20 * widthFactor + 5);
        for (let w = 0; w < windowCount; w++) {
          const window = document.createElement('div');
          window.className = 'window';
          
          const windowTypes = ['', 'dark', 'blue'];
          const windowType = windowTypes[Math.floor(Math.random() * windowTypes.length)];
          if (windowType) window.classList.add(`window-${windowType}`);
          
          window.style.left = `${Math.random() * 85 + 5}%`;
          window.style.top = `${Math.random() * 80 + 10}%`;
          
          building.appendChild(window);
        }
        
        // 添加霓虹灯标志
        if (Math.random() > 0.8) {
          const sign = document.createElement('div');
          sign.className = 'neon-sign';
          sign.textContent = ['MIND', 'TOWER', 'CAFE', 'OPEN', 'DATA', 'CORE'][Math.floor(Math.random() * 6)];
          building.appendChild(sign);
        }
        
        container.appendChild(building);
      }
    }
    
    // 创建云朵
    function createClouds() {
      const cloudsContainer = document.getElementById('clouds');
      cloudsContainer.innerHTML = '';
      const cloudCount = 15;
      
      for (let i = 0; i < cloudCount; i++) {
        const cloud = document.createElement('div');
        const cloudSize = ['cloud-small', 'cloud-medium', 'cloud-large'][Math.floor(Math.random() * 3)];
        const cloudLayer = `cloud-layer-${Math.floor(Math.random() * 3) + 1}`;
        cloud.className = `cloud ${cloudSize} ${cloudLayer}`;
        
        for (let j = 0; j < 4; j++) {
            cloud.appendChild(document.createElement('span'));
        }

        cloud.style.left = `${Math.random() * 100}%`;
        cloud.style.top = `${Math.random() * 50}%`;
        
        const duration = Math.random() * 150 + 80;
        const direction = Math.random() > 0.5 ? 'float-right' : 'float-left';
        cloud.style.animation = `${direction} ${duration}s linear infinite`;
        cloud.style.animationDelay = `-${Math.random() * duration}s`;
        
        cloudsContainer.appendChild(cloud);
      }
    }
    
    // 创建远山
    function createMountains() {
      const mountainsContainer = document.getElementById('mountains');
      mountainsContainer.innerHTML = '';
      for (let i = 1; i <= 3; i++) {
        const mountain = document.createElement('div');
        mountain.className = `mountain mountain-${i}`;
        mountainsContainer.appendChild(mountain);
      }
    }

    // 创建动态元素
    function createDynamicElements() {
      const container = document.getElementById('dynamicElements');
      container.innerHTML = '';

      // 创建鸟群
      const birdCount = Math.floor(Math.random() * 3) + 2;
      for (let i = 0; i < birdCount; i++) {
        const bird = document.createElement('div');
        bird.className = 'bird';
        bird.style.top = `${Math.random() * 30 + 5}%`;
        const duration = Math.random() * 20 + 15;
        bird.style.animationDuration = `${duration}s`;
        bird.style.animationDelay = `-${Math.random() * duration}s`;
        container.appendChild(bird);
      }

      // 创建无人机
      const droneCount = Math.floor(Math.random() * 2) + 1;
       for (let i = 0; i < droneCount; i++) {
        const drone = document.createElement('div');
        drone.className = 'drone';
        const light = document.createElement('div');
        light.className = 'drone-light';
        drone.appendChild(light);

        drone.style.top = `${Math.random() * 25 + 15}%`;
        const duration = Math.random() * 15 + 10;
        drone.style.animationDuration = `${duration}s`;
        drone.style.animationDelay = `-${Math.random() * duration}s`;
        container.appendChild(drone);
      }

      // 创建飞碟
      const ufoCount = Math.floor(Math.random() * 2) + 1;
      for (let i = 0; i < ufoCount; i++) {
        const ufo = document.createElement('div');
        ufo.className = 'ufo';
        ufo.style.top = `${Math.random() * 20 + 5}%`;
        const duration = Math.random() * 30 + 20;
        ufo.style.animationDuration = `${duration}s`;
        ufo.style.animationDelay = `-${Math.random() * duration}s`;
        container.appendChild(ufo);
      }

      // 创建悬浮车
      const hoverCarCount = Math.floor(Math.random() * 3) + 2;
      for (let i = 0; i < hoverCarCount; i++) {
        const hoverCar = document.createElement('div');
        hoverCar.className = 'hover-car';
        hoverCar.style.top = `${Math.random() * 35 + 10}%`;
        const duration = Math.random() * 15 + 10;
        hoverCar.style.animationDuration = `${duration}s`;
        hoverCar.style.animationDelay = `-${Math.random() * duration}s`;
        container.appendChild(hoverCar);
      }

      // 创建热气球
      const balloonCount = Math.floor(Math.random() * 2) + 1;
      for (let i = 0; i < balloonCount; i++) {
        const balloon = document.createElement('div');
        balloon.className = 'balloon';
        
        const balloonBody = document.createElement('div');
        balloonBody.className = 'balloon-body';
        
        // 随机气球颜色
        const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f1c40f', '#9b59b6', '#1abc9c'];
        const color = colors[Math.floor(Math.random() * colors.length)];
        balloonBody.style.background = `linear-gradient(135deg, ${color} 0%, ${darkenColor(color, 20)} 100%)`;
        
        const balloonBasket = document.createElement('div');
        balloonBasket.className = 'balloon-basket';
        
        const balloonString = document.createElement('div');
        balloonString.className = 'balloon-string';
        
        balloon.appendChild(balloonBody);
        balloon.appendChild(balloonString);
        balloon.appendChild(balloonBasket);
        
        balloon.style.left = `${Math.random() * 80 + 10}%`;
        balloon.style.top = `${Math.random() * 20 + 5}%`;
        
        const duration = Math.random() * 30 + 40;
        balloon.style.animationDuration = `${duration}s`;
        
        container.appendChild(balloon);
      }

      // 创建未来飞行器
      const craftCount = Math.floor(Math.random() * 2) + 1;
      for (let i = 0; i < craftCount; i++) {
        const craft = document.createElement('div');
        craft.className = 'future-craft';
        craft.style.top = `${Math.random() * 25 + 10}%`;
        const duration = Math.random() * 25 + 20;
        craft.style.animationDuration = `${duration}s`;
        craft.style.animationDelay = `-${Math.random() * duration}s`;
        container.appendChild(craft);
      }
    }
    
    // 辅助函数：将颜色加深
    function darkenColor(color, percent) {
      const num = parseInt(color.replace('#', ''), 16),
            amt = Math.round(2.55 * percent),
            R = (num >> 16) - amt,
            G = (num >> 8 & 0x00FF) - amt,
            B = (num & 0x0000FF) - amt;
      return '#' + (0x1000000 + (R < 0 ? 0 : R) * 0x10000 + (G < 0 ? 0 : G) * 0x100 + (B < 0 ? 0 : B)).toString(16).slice(1);
    }
    
    // 渲染楼层
    function renderTower() {
      // 如果没有楼层，显示工地
      if (towerData.floors.length === 0) {
        constructionSite.style.display = 'flex';
        return;
      }
      
      constructionSite.style.display = 'none';
      
      // 清除已有楼层
      const existingFloors = tower.querySelectorAll('.floor, .floor-roof, .floor-base');
      existingFloors.forEach(floor => floor.remove());
      
      // 添加底座
      const foundation = document.createElement('div');
      foundation.className = 'floor-base';
      tower.appendChild(foundation);
      
      // 从底层到顶层渲染楼层
      // 数组中的顺序是从上到下：索引0是顶层，最后一个元素是底层
      // 使用flex-direction: column-reverse后，DOM中的顺序会被视觉上反转
      // 所以我们仍然按照从底层到顶层的顺序添加元素
      for (let i = towerData.floors.length - 1; i >= 0; i--) {
        const floor = towerData.floors[i];
        const floorElement = document.createElement('div');
        floorElement.className = 'floor';
        floorElement.dataset.index = i;
        
        // 判断是否需要双层显示（房间数量大于3）
        const needDoubleFloor = floor.rooms.length > 3;
        if (needDoubleFloor) {
          floorElement.classList.add('floor-double');
        }
        
        // 添加楼层内容
        const floorContent = document.createElement('div');
        floorContent.className = 'floor-content';
        
        // 随机应用墙面样式
        const wallPatternCount = 4; // 4种样式
        const randomPattern = Math.floor(Math.random() * (wallPatternCount + 1)); // +1 来包含默认样式
        if (randomPattern > 0) {
            floorContent.classList.add(`floor-wall-pattern-${randomPattern}`);
        }
        
        // 添加3D效果元素
        const bottomEffect = document.createElement('div');
        bottomEffect.className = 'floor-3d-effect';
        floorContent.appendChild(bottomEffect);
        
        // 添加左右两侧阳台
        const leftBalcony = document.createElement('div');
        leftBalcony.className = 'floor-balcony-left';
        
        // 添加阳台栏杆
        const leftRailing = document.createElement('div');
        leftRailing.className = 'floor-balcony-railing';
        leftBalcony.appendChild(leftRailing);
        
        // 添加阳台地板
        const leftFloor = document.createElement('div');
        leftFloor.className = 'floor-balcony-floor';
        leftBalcony.appendChild(leftFloor);
        
        // 添加阳台植物
        const leftPlant = document.createElement('div');
        leftPlant.className = 'floor-balcony-plant';
        leftBalcony.appendChild(leftPlant);
        
        floorContent.appendChild(leftBalcony);
        
        // 添加右侧阳台
        const rightBalcony = document.createElement('div');
        rightBalcony.className = 'floor-balcony-right';
        
        // 添加阳台栏杆
        const rightRailing = document.createElement('div');
        rightRailing.className = 'floor-balcony-railing';
        rightBalcony.appendChild(rightRailing);
        
        // 添加阳台地板
        const rightFloor = document.createElement('div');
        rightFloor.className = 'floor-balcony-floor';
        rightBalcony.appendChild(rightFloor);
        
        // 添加阳台植物
        const rightPlant = document.createElement('div');
        rightPlant.className = 'floor-balcony-plant';
        rightBalcony.appendChild(rightPlant);
        
        floorContent.appendChild(rightBalcony);
        
        // 添加随机装饰元素
        // addRandomDecorations(floorContent); // 暂时注释掉，因为目前没有相关样式
        
        // 创建内部内容
        if (floor.rooms.length === 0) {
          // 空楼层，显示装修工具
          const emptyFloor = document.createElement('div');
          emptyFloor.className = 'floor-empty';
          
          // 添加装修工具
          const toolTypes = ['paint', 'ladder', 'cement', 'plank', 'toolbox'];
          for (let t = 0; t < 6; t++) {
            const tool = document.createElement('div');
            const toolType = toolTypes[Math.floor(Math.random() * toolTypes.length)];
            tool.className = `construction-tool ${toolType}`;
            
            // 随机位置
            tool.style.left = `${Math.random() * 80 + 10}%`;
            tool.style.top = `${Math.random() * 70 + 15}%`;
            
            emptyFloor.appendChild(tool);
          }
          
          floorContent.appendChild(emptyFloor);
        } else {
          // 有房间，显示房间布局
          const interior = document.createElement('div');
          interior.className = 'floor-interior';
          
          if (needDoubleFloor) {
            // 双层布局
            interior.classList.add('floor-interior-double');
            
            // 创建上层和下层
            const topRow = document.createElement('div');
            topRow.className = 'floor-interior-row';
            
            const bottomRow = document.createElement('div');
            bottomRow.className = 'floor-interior-row';
            
            // 添加分隔线
            const divider = document.createElement('div');
            divider.className = 'floor-divider';
            
            // 将房间分配到上下两层
            floor.rooms.forEach((room, index) => {
              const roomElement = createRoomElement(room);
              
              // 前3个房间放在上层，其余放在下层
              if (index < 3) {
                topRow.appendChild(roomElement);
              } else {
                bottomRow.appendChild(roomElement);
              }
            });
            
            interior.appendChild(topRow);
            interior.appendChild(divider);
            interior.appendChild(bottomRow);
          } else {
            // 单层布局，直接添加所有房间
            floor.rooms.forEach((room) => {
              const roomElement = createRoomElement(room);
              interior.appendChild(roomElement);
            });
          }
          
          floorContent.appendChild(interior);
        }
        
        floorElement.appendChild(floorContent);
        
        // 添加楼层名称标签
        const floorLabel = document.createElement('div');
        floorLabel.className = 'floor-label';
        floorLabel.textContent = floor.name;
        floorLabel.addEventListener('click', (e) => {
          e.stopPropagation();
          showFloorRooms(i);
        });
        // 将楼层标签添加到tower而不是floorElement，确保它在所有楼层和阳台之上
        tower.appendChild(floorLabel);
        
        // 设置标签位置，与楼层位置相对应
        floorLabel.style.top = `${floorElement.offsetTop + floorElement.offsetHeight / 2}px`;
        
        // 添加定位更新函数到window.resize事件
        window.addEventListener('resize', () => {
          requestAnimationFrame(() => {
            const updatedTop = floorElement.offsetTop + floorElement.offsetHeight / 2;
            floorLabel.style.top = `${updatedTop}px`;
          });
        });
        
        // 添加楼层控制按钮
        const floorControls = document.createElement('div');
        floorControls.className = 'floor-controls';
        
        const addRoomBtn = document.createElement('button');
        addRoomBtn.className = 'floor-control-btn add-room-btn';
        addRoomBtn.innerHTML = '+';
        addRoomBtn.title = '添加房间';
        addRoomBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          openAddRoomModal(i);
        });
        floorControls.appendChild(addRoomBtn);
        
        const viewRoomsBtn = document.createElement('button');
        viewRoomsBtn.className = 'floor-control-btn view-rooms-btn';
        viewRoomsBtn.innerHTML = '👁';
        viewRoomsBtn.title = '查看房间';
        viewRoomsBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          showFloorRooms(i);
        });
        floorControls.appendChild(viewRoomsBtn);
        
        floorElement.appendChild(floorControls);
        
        tower.appendChild(floorElement);
      }
      
      // 添加歇山顶屋顶
      const roof = document.createElement('div');
      roof.className = 'floor-roof';
      
      // 创建屋顶内容容器
      const roofContent = document.createElement('div');
      roofContent.className = 'roof-content';
      
      // 添加屋顶主体
      const roofMain = document.createElement('div');
      roofMain.className = 'roof-main';
      
      // 添加瓦片纹理
      const roofTiles = document.createElement('div');
      roofTiles.className = 'roof-tiles';
      roofMain.appendChild(roofTiles);
      
      // 将主体添加到内容容器
      roofContent.appendChild(roofMain);
      
      // 添加博风板(山墙顶部装饰板)
      const gableBoard = document.createElement('div');
      gableBoard.className = 'roof-gable-board';
      roofContent.appendChild(gableBoard);
      
      // 添加上层屋檐(山墙部分)
      const upperEave = document.createElement('div');
      upperEave.className = 'roof-upper-eave';
      roofContent.appendChild(upperEave);
      
      // 添加下层屋檐
      const roofEave = document.createElement('div');
      roofEave.className = 'roof-eave';
      roofContent.appendChild(roofEave);
      
      // 添加挑檐
      const flyingEave = document.createElement('div');
      flyingEave.className = 'roof-flying-eave';
      roofContent.appendChild(flyingEave);
      
      // 添加屋角翘起
      const roofCornerLeft = document.createElement('div');
      roofCornerLeft.className = 'roof-corner roof-corner-left';
      roofContent.appendChild(roofCornerLeft);
      
      const roofCornerRight = document.createElement('div');
      roofCornerRight.className = 'roof-corner roof-corner-right';
      roofContent.appendChild(roofCornerRight);
      
      // 添加正脊
      const roofRidge = document.createElement('div');
      roofRidge.className = 'roof-ridge';
      roofContent.appendChild(roofRidge);
      
      // 添加垂脊
      const verticalRidgeLeft = document.createElement('div');
      verticalRidgeLeft.className = 'roof-vertical-ridge roof-vertical-ridge-left';
      roofContent.appendChild(verticalRidgeLeft);
      
      const verticalRidgeRight = document.createElement('div');
      verticalRidgeRight.className = 'roof-vertical-ridge roof-vertical-ridge-right';
      roofContent.appendChild(verticalRidgeRight);
      
      // 添加戗脊
      const slantPositions = ['left-front', 'right-front', 'left-back', 'right-back'];
      slantPositions.forEach(pos => {
        const slantRidge = document.createElement('div');
        slantRidge.className = `roof-slant-ridge roof-slant-ridge-${pos}`;
        roofContent.appendChild(slantRidge);
      });
      
      // 添加脊饰(龙形装饰)
      const roofDragon = document.createElement('div');
      roofDragon.className = 'roof-dragon';
      roofContent.appendChild(roofDragon);
      
      // 添加脊兽(屋脊上的装饰兽)
      const beastPositions = ['left', 'center', 'right'];
      beastPositions.forEach(pos => {
        const beast = document.createElement('div');
        beast.className = `roof-beast roof-beast-${pos}`;
        roofContent.appendChild(beast);
      });
      
      // 添加正吻(屋脊两端的装饰)
      const endBeastLeft = document.createElement('div');
      endBeastLeft.className = 'roof-end-beast roof-end-beast-left';
      roofContent.appendChild(endBeastLeft);
      
      const endBeastRight = document.createElement('div');
      endBeastRight.className = 'roof-end-beast roof-end-beast-right';
      roofContent.appendChild(endBeastRight);
      
      // 添加屋脊装饰
      for (let i = 0; i < 5; i++) {
        const decoration = document.createElement('div');
        decoration.className = 'roof-decoration';
        decoration.style.left = `${i * 20 + 10}%`;
        roofContent.appendChild(decoration);
      }
      
      // 添加中央主装饰
      const centerDecoration = document.createElement('div');
      centerDecoration.className = 'roof-decoration roof-decoration-center';
      roofContent.appendChild(centerDecoration);
      
      // 添加斗栱(支撑屋檐的传统构件)
      for (let i = 1; i <= 5; i++) {
        const bracket = document.createElement('div');
        bracket.className = `roof-bracket roof-bracket-${i}`;
        roofContent.appendChild(bracket);
      }
      
      // 添加瓦当(檐头瓦装饰)
      for (let i = 1; i <= 5; i++) {
        const tileEnd = document.createElement('div');
        tileEnd.className = `roof-tile-end roof-tile-end-${i}`;
        roofContent.appendChild(tileEnd);
      }
      
      roof.appendChild(roofContent);
      
      // 将屋顶添加到塔顶
      tower.appendChild(roof);
    }
    
    // 创建房间元素的辅助函数
    function createRoomElement(room) {
      const roomElement = document.createElement('div');
      roomElement.className = `room room-${room.type}`;
      roomElement.title = room.content;

      // 先创建标题元素，但稍后再添加，确保它在最顶层
      const roomTitle = document.createElement('div');
      roomTitle.className = 'room-title-glow';
      roomTitle.textContent = room.name;
      
      // 为特殊房间类型添加特殊元素
      if (room.type === 'livingroom') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'livingroom-wall livingroom-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'livingroom-wall livingroom-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'livingroom-wall livingroom-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'livingroom-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'livingroom-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加墙角连接元素
        // 左上角
        const cornerTopLeft = document.createElement('div');
        cornerTopLeft.className = 'livingroom-corner livingroom-corner-top-left';
        roomElement.appendChild(cornerTopLeft);
        
        // 右上角
        const cornerTopRight = document.createElement('div');
        cornerTopRight.className = 'livingroom-corner livingroom-corner-top-right';
        roomElement.appendChild(cornerTopRight);
        
        // 左下角
        const cornerBottomLeft = document.createElement('div');
        cornerBottomLeft.className = 'livingroom-corner livingroom-corner-bottom-left';
        roomElement.appendChild(cornerBottomLeft);
        
        // 右下角
        const cornerBottomRight = document.createElement('div');
        cornerBottomRight.className = 'livingroom-corner livingroom-corner-bottom-right';
        roomElement.appendChild(cornerBottomRight);
        
        // 添加边缘线条
        // 左侧边缘
        const edgeLeft = document.createElement('div');
        edgeLeft.className = 'livingroom-edge livingroom-edge-left';
        roomElement.appendChild(edgeLeft);
        
        // 右侧边缘
        const edgeRight = document.createElement('div');
        edgeRight.className = 'livingroom-edge livingroom-edge-right';
        roomElement.appendChild(edgeRight);
        
        // 顶部边缘
        const edgeTop = document.createElement('div');
        edgeTop.className = 'livingroom-edge livingroom-edge-top';
        roomElement.appendChild(edgeTop);
        
        // 底部边缘
        const edgeBottom = document.createElement('div');
        edgeBottom.className = 'livingroom-edge livingroom-edge-bottom';
        roomElement.appendChild(edgeBottom);
        
        // 添加客厅装饰元素
        // 1. 沙发
        const sofa = document.createElement('div');
        sofa.className = 'livingroom-furniture livingroom-sofa';
        roomElement.appendChild(sofa);
        
        // 2. 茶几
        const table = document.createElement('div');
        table.className = 'livingroom-furniture livingroom-table';
        roomElement.appendChild(table);
        
        // 3. 电视
        const tv = document.createElement('div');
        tv.className = 'livingroom-furniture livingroom-tv';
        roomElement.appendChild(tv);
        
        // 4. 电视柜
        const tvStand = document.createElement('div');
        tvStand.className = 'livingroom-furniture livingroom-tv-stand';
        roomElement.appendChild(tvStand);
        
        // 5. 地毯
        const carpet = document.createElement('div');
        carpet.className = 'livingroom-carpet';
        roomElement.appendChild(carpet);
        
        // 6. 植物
        const plant = document.createElement('div');
        plant.className = 'livingroom-furniture livingroom-plant';
        roomElement.appendChild(plant);
        
        // 最后添加标题，确保它在所有元素上方
        roomElement.appendChild(roomTitle);
      }
      else if (room.type === 'gym') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'gym-wall gym-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'gym-wall gym-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'gym-wall gym-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'gym-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'gym-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加健身房装饰元素
        // 1. 镜子
        const mirror = document.createElement('div');
        mirror.className = 'gym-mirror';
        roomElement.appendChild(mirror);
        
        // 2. 跑步机
        const treadmill = document.createElement('div');
        treadmill.className = 'gym-equipment gym-treadmill';
        
        const treadmillBelt = document.createElement('div');
        treadmillBelt.className = 'treadmill-belt';
        treadmill.appendChild(treadmillBelt);
        
        roomElement.appendChild(treadmill);
        
        // 3. 哑铃
        const dumbbell = document.createElement('div');
        dumbbell.className = 'gym-equipment gym-dumbbell';
        roomElement.appendChild(dumbbell);
        
        // 4. 杠铃
        const barbell = document.createElement('div');
        barbell.className = 'gym-equipment gym-barbell';
        roomElement.appendChild(barbell);
        
        // 5. 健身者
        const person = document.createElement('div');
        person.className = 'gym-person';
        roomElement.appendChild(person);
        
        // 最后添加标题，确保它在所有元素上方
        roomElement.appendChild(roomTitle);
      }
      else if (room.type === 'pool') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'pool-wall pool-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'pool-wall pool-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'pool-wall pool-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板/池底
        const floor = document.createElement('div');
        floor.className = 'pool-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'pool-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加游泳池元素
        // 1. 水面
        const water = document.createElement('div');
        water.className = 'pool-water';
        roomElement.appendChild(water);
        
        // 2. 水波纹
        for (let i = 0; i < 3; i++) {
          const ripple = document.createElement('div');
          ripple.className = 'pool-ripple';
          ripple.style.animationDelay = `${i * 0.5}s`;
          water.appendChild(ripple);
        }
        
        // 3. 泳道线
        const lanes = document.createElement('div');
        lanes.className = 'pool-lanes';
        roomElement.appendChild(lanes);
        
        // 4. 游泳者
        const swimmer = document.createElement('div');
        swimmer.className = 'pool-swimmer';
        roomElement.appendChild(swimmer);
        
        // 5. 跳水板
        const divingBoard = document.createElement('div');
        divingBoard.className = 'pool-diving-board';
        roomElement.appendChild(divingBoard);
        
        // 6. 梯子
        const ladder = document.createElement('div');
        ladder.className = 'pool-ladder';
        roomElement.appendChild(ladder);
      }
      else if (room.type === 'garden') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'garden-wall garden-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'garden-wall garden-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'garden-wall garden-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板/土地
        const floor = document.createElement('div');
        floor.className = 'garden-floor';
        roomElement.appendChild(floor);
        
        // 天花板/天空
        const ceiling = document.createElement('div');
        ceiling.className = 'garden-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加墙角连接元素
        // 左上角
        const cornerTopLeft = document.createElement('div');
        cornerTopLeft.className = 'garden-corner garden-corner-top-left';
        roomElement.appendChild(cornerTopLeft);
        
        // 右上角
        const cornerTopRight = document.createElement('div');
        cornerTopRight.className = 'garden-corner garden-corner-top-right';
        roomElement.appendChild(cornerTopRight);
        
        // 左下角
        const cornerBottomLeft = document.createElement('div');
        cornerBottomLeft.className = 'garden-corner garden-corner-bottom-left';
        roomElement.appendChild(cornerBottomLeft);
        
        // 右下角
        const cornerBottomRight = document.createElement('div');
        cornerBottomRight.className = 'garden-corner garden-corner-bottom-right';
        roomElement.appendChild(cornerBottomRight);
        
        // 添加边缘线条
        // 左侧边缘
        const edgeLeft = document.createElement('div');
        edgeLeft.className = 'garden-edge garden-edge-left';
        roomElement.appendChild(edgeLeft);
        
        // 右侧边缘
        const edgeRight = document.createElement('div');
        edgeRight.className = 'garden-edge garden-edge-right';
        roomElement.appendChild(edgeRight);
        
        // 顶部边缘
        const edgeTop = document.createElement('div');
        edgeTop.className = 'garden-edge garden-edge-top';
        roomElement.appendChild(edgeTop);
        
        // 底部边缘
        const edgeBottom = document.createElement('div');
        edgeBottom.className = 'garden-edge garden-edge-bottom';
        roomElement.appendChild(edgeBottom);
        
        // 添加花园装饰元素
        // 1. 植物
        const plant = document.createElement('div');
        plant.className = 'garden-plant';
        roomElement.appendChild(plant);
        
        // 2. 树
        const tree = document.createElement('div');
        tree.className = 'garden-tree';
        roomElement.appendChild(tree);
        
        // 3. 花朵
        const flowers = document.createElement('div');
        flowers.className = 'garden-flowers';
        roomElement.appendChild(flowers);
        
        // 4. 花盆
        const pot = document.createElement('div');
        pot.className = 'garden-pot';
        roomElement.appendChild(pot);
        
        // 5. 池塘
        const pond = document.createElement('div');
        pond.className = 'garden-pond';
        roomElement.appendChild(pond);
        
        // 6. 蝴蝶
        const butterfly = document.createElement('div');
        butterfly.className = 'garden-butterfly';
        roomElement.appendChild(butterfly);
        
        // 7. 阳光效果
        const sunlight = document.createElement('div');
        sunlight.className = 'garden-sunlight';
        roomElement.appendChild(sunlight);
      }
      else if (room.type === 'meeting') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'meeting-wall meeting-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'meeting-wall meeting-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'meeting-wall meeting-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'meeting-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'meeting-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加墙角连接元素
        // 左上角
        const cornerTopLeft = document.createElement('div');
        cornerTopLeft.className = 'meeting-corner meeting-corner-top-left';
        roomElement.appendChild(cornerTopLeft);
        
        // 右上角
        const cornerTopRight = document.createElement('div');
        cornerTopRight.className = 'meeting-corner meeting-corner-top-right';
        roomElement.appendChild(cornerTopRight);
        
        // 左下角
        const cornerBottomLeft = document.createElement('div');
        cornerBottomLeft.className = 'meeting-corner meeting-corner-bottom-left';
        roomElement.appendChild(cornerBottomLeft);
        
        // 右下角
        const cornerBottomRight = document.createElement('div');
        cornerBottomRight.className = 'meeting-corner meeting-corner-bottom-right';
        roomElement.appendChild(cornerBottomRight);
        
        // 添加边缘线条
        // 左侧边缘
        const edgeLeft = document.createElement('div');
        edgeLeft.className = 'meeting-edge meeting-edge-left';
        roomElement.appendChild(edgeLeft);
        
        // 右侧边缘
        const edgeRight = document.createElement('div');
        edgeRight.className = 'meeting-edge meeting-edge-right';
        roomElement.appendChild(edgeRight);
        
        // 顶部边缘
        const edgeTop = document.createElement('div');
        edgeTop.className = 'meeting-edge meeting-edge-top';
        roomElement.appendChild(edgeTop);
        
        // 底部边缘
        const edgeBottom = document.createElement('div');
        edgeBottom.className = 'meeting-edge meeting-edge-bottom';
        roomElement.appendChild(edgeBottom);
        
        // 添加会议室装饰元素
        // 1. 会议桌
        const table = document.createElement('div');
        table.className = 'meeting-table';
        roomElement.appendChild(table);
        
        // 2. 桌腿
        const tableLegLeft = document.createElement('div');
        tableLegLeft.className = 'meeting-table-leg meeting-table-leg-left';
        roomElement.appendChild(tableLegLeft);
        
        const tableLegRight = document.createElement('div');
        tableLegRight.className = 'meeting-table-leg meeting-table-leg-right';
        roomElement.appendChild(tableLegRight);
        
        // 3. 椅子
        for (let i = 0; i < 6; i++) {
          const chair = document.createElement('div');
          chair.className = 'meeting-chair';
          // 设置椅子位置，使其分布在桌子周围
          if (i < 3) {
            chair.style.bottom = '25%';
            chair.style.left = `${20 + i * 20}%`;
          } else {
            chair.style.bottom = '25%';
            chair.style.right = `${20 + (i-3) * 20}%`;
          }
          roomElement.appendChild(chair);
        }
        
        // 4. 投影仪
        const projector = document.createElement('div');
        projector.className = 'meeting-projector';
        roomElement.appendChild(projector);
        
        // 5. 投影仪光线
        const projectorLight = document.createElement('div');
        projectorLight.className = 'meeting-projector-light';
        roomElement.appendChild(projectorLight);
        
        // 6. 投影屏幕
        const screen = document.createElement('div');
        screen.className = 'meeting-screen';
        roomElement.appendChild(screen);
        
        // 7. 演示文稿
        const presentation = document.createElement('div');
        presentation.className = 'meeting-presentation';
        roomElement.appendChild(presentation);
        
        // 8. 笔记本电脑
        const laptop = document.createElement('div');
        laptop.className = 'meeting-laptop';
        laptop.style.left = '35%';
        roomElement.appendChild(laptop);
        
        // 9. 文件夹
        const folder = document.createElement('div');
        folder.className = 'meeting-folder';
        folder.style.left = '60%';
        roomElement.appendChild(folder);
        
        // 10. 水杯
        const cup = document.createElement('div');
        cup.className = 'meeting-cup';
        cup.style.right = '35%';
        roomElement.appendChild(cup);
        
        // 最后添加标题，确保它在所有元素上方
        roomElement.appendChild(roomTitle);
      }
      else if (room.type === 'computer') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'computer-wall computer-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'computer-wall computer-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'computer-wall computer-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'computer-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'computer-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加电脑间装饰元素
        // 1. 桌子
        const desk = document.createElement('div');
        desk.className = 'computer-desk';
        roomElement.appendChild(desk);
        
        // 2. 电脑显示器
        const monitor = document.createElement('div');
        monitor.className = 'computer-monitor';
        roomElement.appendChild(monitor);
        
        // 3. 显示器屏幕
        const screen = document.createElement('div');
        screen.className = 'computer-screen';
        monitor.appendChild(screen);
        
        // 4. 键盘
        const keyboard = document.createElement('div');
        keyboard.className = 'computer-keyboard';
        roomElement.appendChild(keyboard);
        
        // 5. 鼠标
        const mouse = document.createElement('div');
        mouse.className = 'computer-mouse';
        roomElement.appendChild(mouse);
        
        // 6. 电脑主机
        const tower = document.createElement('div');
        tower.className = 'computer-tower';
        roomElement.appendChild(tower);
        
        // 7. 椅子
        const chair = document.createElement('div');
        chair.className = 'computer-chair';
        roomElement.appendChild(chair);
      }
      else if (room.type === 'library') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'library-wall library-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'library-wall library-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'library-wall library-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'library-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'library-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加图书馆装饰元素
        // 1. 书架
        const shelves = document.createElement('div');
        shelves.className = 'library-shelves';
        roomElement.appendChild(shelves);
        
        // 2. 书籍
        const books = document.createElement('div');
        books.className = 'library-books';
        roomElement.appendChild(books);
        
        // 3. 阅读桌
        const table = document.createElement('div');
        table.className = 'library-table';
        roomElement.appendChild(table);
        
        // 4. 椅子
        const chair = document.createElement('div');
        chair.className = 'library-chair';
        roomElement.appendChild(chair);
        
        // 5. 台灯
        const lamp = document.createElement('div');
        lamp.className = 'library-lamp';
        roomElement.appendChild(lamp);
        
        // 6. 打开的书
        const openBook = document.createElement('div');
        openBook.className = 'library-open-book';
        roomElement.appendChild(openBook);
        
        // 7. 书签
        const bookmark = document.createElement('div');
        bookmark.className = 'library-bookmark';
        roomElement.appendChild(bookmark);
        
        // 8. 书墙
        const bookWall = document.createElement('div');
        bookWall.className = 'library-book-wall';
        roomElement.appendChild(bookWall);
        
        // 9. 书墙上的彩色书脊
        const bookColors = ['#f44336', '#2196f3', '#4caf50', '#ff9800', '#9c27b0', '#3f51b5', '#e91e63', '#ffc107'];
        for (let i = 0; i < 20; i++) {
          const bookSpine = document.createElement('div');
          bookSpine.className = 'library-book-spine';
          bookSpine.style.backgroundColor = bookColors[i % bookColors.length];
          bookSpine.style.left = `${3 + (i % 10) * 4}px`;
          bookSpine.style.top = `${5 + Math.floor(i / 10) * 8}px`;
          bookSpine.style.height = `${5 + Math.random() * 5}px`; 
          bookWall.appendChild(bookSpine);
        }
        
        // 10. 地毯
        const carpet = document.createElement('div');
        carpet.className = 'library-carpet';
        roomElement.appendChild(carpet);
        
        // 11. 窗户
        const window = document.createElement('div');
        window.className = 'library-window';
        roomElement.appendChild(window);
        
        // 12. 吊灯
        const chandelier = document.createElement('div');
        chandelier.className = 'library-chandelier';
        roomElement.appendChild(chandelier);
        
        // 13. 吊灯灯泡
        for (let i = 0; i < 3; i++) {
          const bulb = document.createElement('div');
          bulb.className = 'library-chandelier-bulb';
          chandelier.appendChild(bulb);
        }
        
        // 14. 植物
        const plant = document.createElement('div');
        plant.className = 'library-plant';
        roomElement.appendChild(plant);
        
        // 15. 植物叶子
        for (let i = 0; i < 3; i++) {
          const leaf = document.createElement('div');
          leaf.className = 'library-plant-leaf';
          plant.appendChild(leaf);
        }
        
        // 16. 浮动的灰尘粒子
        for (let i = 0; i < 3; i++) {
          const dust = document.createElement('div');
          dust.className = 'library-dust';
          roomElement.appendChild(dust);
        }
        
        // 17. 书页翻动效果
        const flippingPage = document.createElement('div');
        flippingPage.className = 'library-flipping-page';
        roomElement.appendChild(flippingPage);
      }
      else if (room.type === 'cafe') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'cafe-wall cafe-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'cafe-wall cafe-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'cafe-wall cafe-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'cafe-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'cafe-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加咖啡厅装饰元素
        // 1. 咖啡桌
        const table = document.createElement('div');
        table.className = 'cafe-item cafe-table';
        roomElement.appendChild(table);
        
        // 2. 咖啡杯
        const cup = document.createElement('div');
        cup.className = 'cafe-item cafe-cup';
        roomElement.appendChild(cup);
        
        // 3. 咖啡蒸汽
        for (let i = 0; i < 3; i++) {
          const steam = document.createElement('div');
          steam.className = 'cafe-steam';
          roomElement.appendChild(steam);
        }
        
        // 4. 咖啡机
        const machine = document.createElement('div');
        machine.className = 'cafe-item cafe-machine';
        roomElement.appendChild(machine);
        
        // 5. 糕点展示柜
        const pastryCase = document.createElement('div');
        pastryCase.className = 'cafe-item cafe-pastry-case';
        roomElement.appendChild(pastryCase);
      }
      else if (room.type === 'studio') {
        // 添加3D墙壁元素
        // 左墙
        const leftWall = document.createElement('div');
        leftWall.className = 'studio-wall studio-wall-left';
        roomElement.appendChild(leftWall);
        
        // 右墙
        const rightWall = document.createElement('div');
        rightWall.className = 'studio-wall studio-wall-right';
        roomElement.appendChild(rightWall);
        
        // 后墙
        const backWall = document.createElement('div');
        backWall.className = 'studio-wall studio-wall-back';
        roomElement.appendChild(backWall);
        
        // 地板
        const floor = document.createElement('div');
        floor.className = 'studio-floor';
        roomElement.appendChild(floor);
        
        // 天花板
        const ceiling = document.createElement('div');
        ceiling.className = 'studio-ceiling';
        roomElement.appendChild(ceiling);
        
        // 添加工作室装饰元素
        // 1. 画架
        const easel = document.createElement('div');
        easel.className = 'studio-easel';
        roomElement.appendChild(easel);
        
        // 2. 画布
        const canvas = document.createElement('div');
        canvas.className = 'studio-canvas';
        easel.appendChild(canvas);
        
        // 3. 调色板
        const palette = document.createElement('div');
        palette.className = 'studio-palette';
        roomElement.appendChild(palette);
        
        // 4. 颜料点
        const colors = ['#f44336', '#2196f3', '#4caf50', '#ff9800', '#9c27b0'];
        for (let i = 0; i < 5; i++) {
          const paint = document.createElement('div');
          paint.className = 'studio-paint';
          paint.style.backgroundColor = colors[i];
          paint.style.left = `${i * 4}px`;
          palette.appendChild(paint);
        }
        
        // 5. 画笔
        const brush = document.createElement('div');
        brush.className = 'studio-brush';
        roomElement.appendChild(brush);
        
        // 6. 工作台
        const workbench = document.createElement('div');
        workbench.className = 'studio-workbench';
        roomElement.appendChild(workbench);
        
        // 7. 雕塑
        const sculpture = document.createElement('div');
        sculpture.className = 'studio-sculpture';
        roomElement.appendChild(sculpture);
      }
      
      // 始终在最后添加标题，确保它在所有元素上方
      roomElement.appendChild(roomTitle);
      
      return roomElement;
    }
    
    
    // 添加楼层
    function addFloor(name, type) {
      const newFloor = {
        id: Date.now().toString(),
        name: name,
        type: type,
        rooms: []
      };
      
      towerData.floors.unshift(newFloor); // 添加到数组开头，作为最顶层
      saveData();
      renderTower();
    }
    
    // 添加房间
    function addRoom(floorIndex, roomName, content) {
      const randomRoom = getRandomRoomType();
      
      const newRoom = {
        id: Date.now().toString(),
        name: roomName,
        content: content,
        type: randomRoom.type,
        typeName: randomRoom.name
      };
      
      towerData.floors[floorIndex].rooms.push(newRoom);
      saveData();
      renderTower();
    }

    // 删除房间
    function deleteRoom(floorIndex, roomIndex) {
      if (confirm(`确定要删除房间 "${towerData.floors[floorIndex].rooms[roomIndex].name}" 吗？`)) {
        towerData.floors[floorIndex].rooms.splice(roomIndex, 1);
        saveData();
        renderTower();
        viewRoomsModal.classList.remove('show');
        showFloorRooms(floorIndex);
      }
    }
    
    // 删除楼层
    function deleteFloor(floorIndex) {
      if (confirm(`确定要删除楼层 "${towerData.floors[floorIndex].name}" 及其所有房间吗？此操作无法撤销。`)) {
        towerData.floors.splice(floorIndex, 1);
        saveData();
        renderTower();
        viewRoomsModal.classList.remove('show');
      }
    }
    
    // 显示楼层中的房间
    function showFloorRooms(floorIndex) {
      selectedFloorIndex = floorIndex;
      const floor = towerData.floors[floorIndex];
      
        // 显示房间列表
        viewFloorName.textContent = floor.name;
        
        // 清除已有列表
        roomsList.innerHTML = '';
        
      if (floor.rooms.length === 0) {
        roomsList.innerHTML = '<p style="text-align: center; color: #aaa; margin: 20px 0;">该楼层还没有房间。</p>';
      } else {
        // 添加房间列表
        floor.rooms.forEach((room, roomIndex) => {
          const roomItem = document.createElement('div');
          roomItem.style.margin = '10px 0';
          roomItem.style.padding = '10px';
          roomItem.style.backgroundColor = '#3d3d3d';
          roomItem.style.borderRadius = '4px';
          
          const roomHeader = document.createElement('div');
          roomHeader.style.display = 'flex';
          roomHeader.style.justifyContent = 'space-between';
          roomHeader.style.alignItems = 'center';
          roomHeader.style.marginBottom = '5px';
          
          const roomNameEl = document.createElement('strong');
          roomNameEl.textContent = room.name;

          const rightContainer = document.createElement('div');
          rightContainer.style.display = 'flex';
          rightContainer.style.alignItems = 'center';
          
          const roomType = document.createElement('span');
          roomType.textContent = room.typeName;
          roomType.style.fontSize = '12px';
          roomType.style.color = '#aaa';
          rightContainer.appendChild(roomType);

          const deleteButton = document.createElement('button');
          deleteButton.textContent = '删除';
          deleteButton.className = 'button button-cancel';
          deleteButton.style.padding = '2px 6px';
          deleteButton.style.fontSize = '12px';
          deleteButton.style.marginLeft = '10px';
          deleteButton.onclick = (e) => {
            e.stopPropagation();
            deleteRoom(floorIndex, roomIndex);
          };
          rightContainer.appendChild(deleteButton);
          
          roomHeader.appendChild(roomNameEl);
          roomHeader.appendChild(rightContainer);
          
          const roomContent = document.createElement('p');
          roomContent.textContent = room.content;
          roomContent.style.fontSize = '14px';
          roomContent.style.color = '#ddd';
          
          roomItem.appendChild(roomHeader);
          roomItem.appendChild(roomContent);
          roomsList.appendChild(roomItem);
        });
      }
        
      // 更新并显示模态框底部按钮
      const roomsListActions = document.getElementById('roomsListActions');
      roomsListActions.innerHTML = '';

      const footerContainer = document.createElement('div');
      footerContainer.style.display = 'flex';
      footerContainer.style.justifyContent = 'space-between';
      
      const deleteFloorBtn = document.createElement('button');
      deleteFloorBtn.textContent = '删除楼层';
      deleteFloorBtn.className = 'button button-cancel';
      deleteFloorBtn.onclick = () => deleteFloor(floorIndex);
      footerContainer.appendChild(deleteFloorBtn);

      const addRoomBtn = document.createElement('button');
      addRoomBtn.className = 'button';
      addRoomBtn.textContent = '添加新房间';
      addRoomBtn.addEventListener('click', () => {
        viewRoomsModal.classList.remove('show');
          openAddRoomModal(floorIndex);
        });
      footerContainer.appendChild(addRoomBtn);
        
      roomsListActions.appendChild(footerContainer);
        
        // 显示模态框
      viewRoomsModal.classList.add('show');
    }
    
    // 打开添加房间模态框
    function openAddRoomModal(floorIndex) {
      selectedFloorIndex = floorIndex;
      targetFloorName.textContent = towerData.floors[floorIndex].name;
      addRoomModal.classList.add('show');
    }
    
    // 初始化背景元素
    createBuildings();
    createClouds();
    createMountains();
    createDynamicElements();
    
    // 渲染楼层
    renderTower();
    
    // 事件处理
    
    // 添加楼层按钮
    addFloorBtn.addEventListener('click', function() {
      console.log('添加新楼层按钮被点击');
      floorNameInput.value = '';
      addFloorModal.classList.add('show');
    });
    
    // 取消添加楼层
    document.getElementById('cancelAddFloorBtn').addEventListener('click', () => {
      addFloorModal.classList.remove('show');
    });
    
    // 取消添加房间
    document.getElementById('cancelAddRoomBtn').addEventListener('click', () => {
      addRoomModal.classList.remove('show');
    });
    
    document.getElementById('closeViewRoomsBtn').addEventListener('click', () => {
      viewRoomsModal.classList.remove('show');
    });
    
    // 添加楼层表单提交
    document.getElementById('addFloorForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const floorName = floorNameInput.value.trim();
      
      if (floorName) {
        addFloor(floorName, 'default'); // 默认类型
        addFloorModal.classList.remove('show');
      }
    });
    
    // 添加房间表单提交
    document.getElementById('addRoomForm').addEventListener('submit', (e) => {
      e.preventDefault();
      
      if (selectedFloorIndex === null) return;
      
      const roomName = roomNameInput.value.trim();
      const roomContent = roomContentInput.value.trim();
      
      if (roomName && roomContent) {
        addRoom(selectedFloorIndex, roomName, roomContent);
        roomNameInput.value = '';
        roomContentInput.value = '';
        addRoomModal.classList.remove('show');
      }
    });

    // 更新所有楼层标签位置的函数
    function updateFloorLabels() {
      const floorElements = document.querySelectorAll('.floor');
      const floorLabels = document.querySelectorAll('.floor-label');
      
      floorElements.forEach((floorElement, index) => {
        if (floorLabels[index]) {
          const updatedTop = floorElement.offsetTop + floorElement.offsetHeight / 2;
          floorLabels[index].style.top = `${updatedTop}px`;
        }
      });
    }
    
    // 在页面加载完成后更新楼层标签位置
    window.addEventListener('load', updateFloorLabels);
    
    // 在页面滚动时更新楼层标签位置
    window.addEventListener('scroll', () => {
      requestAnimationFrame(updateFloorLabels);
    });
  </script>
</body>
</html> 